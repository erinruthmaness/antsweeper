(this.webpackJsonpantsweeper=this.webpackJsonpantsweeper||[]).push([[0],[,,,,function(e,t,n){e.exports={dropdown:"OptionDropdown_dropdown__38DRP","dropdown--open":"OptionDropdown_dropdown--open__33UTA",slideup:"OptionDropdown_slideup__2pYIm",dropdown__section:"OptionDropdown_dropdown__section__3j9XG",delayRender:"OptionDropdown_delayRender__3rVI5","--comingSoon":"OptionDropdown_--comingSoon__2sopC","--secondaryLetter":"OptionDropdown_--secondaryLetter__11di5","--selected":"OptionDropdown_--selected__TfmbY"}},function(e,t,n){e.exports={titleBar:"TitleBar_titleBar__2RV-D","titleBar--inactive":"TitleBar_titleBar--inactive__29J5I",titleBar__left:"TitleBar_titleBar__left__3-CBo",titleBar__right:"TitleBar_titleBar__right__jGHgj","--minimize":"TitleBar_--minimize__2uDpQ"}},,function(e,t,n){e.exports={calcScreen:"CalcScreen_calcScreen__RRwXz",digit:"CalcScreen_digit__3VlIu",digit__half:"CalcScreen_digit__half__1eycv","digit--0":"CalcScreen_digit--0__1KEH2",digit__top:"CalcScreen_digit__top__1HcA_",digit__bottom:"CalcScreen_digit__bottom__1ewoz","digit--4":"CalcScreen_digit--4__bd3kX","digit--1":"CalcScreen_digit--1__2KQOB","digit--7":"CalcScreen_digit--7__2xAR6","digit--2":"CalcScreen_digit--2__1qZG-","digit--5":"CalcScreen_digit--5__21DdK","digit--3":"CalcScreen_digit--3__2vEfU","digit--9":"CalcScreen_digit--9__1HSCG","digit--6":"CalcScreen_digit--6__3O4Ms"}},function(e,t,n){e.exports={modal:"Modal_modal__yPXXe",modal__title:"Modal_modal__title__o1iZp",modal__contentWrapper:"Modal_modal__contentWrapper__2i-hy",modal__text:"Modal_modal__text__Yqd0o",modal__button:"Modal_modal__button__dEVgJ"}},,function(e,t,n){e.exports={optionButton__wrapper:"OptionWrapper_optionButton__wrapper__-QcGI",optionButton:"OptionWrapper_optionButton__3MnEC","optionButton--clicked":"OptionWrapper_optionButton--clicked__15pvZ"}},function(e,t,n){e.exports={square:"Square_square__29Uf2","square--clicked":"Square_square--clicked__3goIH","nearbys--0":"Square_nearbys--0__3B9BU","nearbys--1":"Square_nearbys--1__2rv_l","nearbys--2":"Square_nearbys--2__AyuRe","nearbys--3":"Square_nearbys--3__y_IXO","nearbys--4":"Square_nearbys--4__297eu","nearbys--5":"Square_nearbys--5__n-yGU","nearbys--6":"Square_nearbys--6__3Cc6G","nearbys--7":"Square_nearbys--7__2TQc2","nearbys--8":"Square_nearbys--8__3TuG9",firstAnt:"Square_firstAnt__2p3BC"}},function(e,t,n){e.exports={bg__footer:"Footer_bg__footer__1Ec9g",startButton:"Footer_startButton__3c_D7",gameWindowButton:"Footer_gameWindowButton__161nZ"}},,function(e,t,n){e.exports={tooltip:"About_tooltip__11UOO","--emailCopied":"About_--emailCopied__1sOyL",tooltip__text:"About_tooltip__text__38Jol"}},function(e,t,n){e.exports={window:"Window_window__2b0FV","window--minimizing":"Window_window--minimizing__BFh_I",minimize:"Window_minimize__2n5Ja","window--maximizing":"Window_window--maximizing__1nHfA","window--minimized":"Window_window--minimized__1UDuv",maximize:"Window_maximize__3DVgN"}},,function(e,t,n){e.exports={overlay:"Overlay_overlay__3V6Nm",overlay_hide:"Overlay_overlay_hide__3172W"}},function(e,t,n){e.exports={gameWrapper:"Board_gameWrapper__1GUZw",boardWrapper:"Board_boardWrapper__2nasP"}},function(e,t,n){},,function(e,t,n){e.exports={optionsBar:"OptionsBar_optionsBar__15dYm"}},function(e,t,n){e.exports={faceButton:"FaceButton_faceButton__2SmbD"}},function(e,t,n){e.exports={controls:"Controls_controls__3MjnT"}},function(e,t,n){e.exports={board_row:"RowWrapper_board_row__1tOdI"}},function(e,t,n){e.exports={window_container:"App_window_container__1hSHD"}},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(20),c=n.n(o),i=(n(30),n(31),n(19),n(3)),s=n(2),l=function(e,t){switch(t.type){case"BOARD_SET":return console.log("ROUND REDUCER board set"),Object(s.a)(Object(s.a)({},e),{},{ready:!0,started:!1});case"START_ROUND":return console.log("ROUND REDUCER start round"),Object(s.a)(Object(s.a)({},e),{},{started:!0});case"WON":case"LOST":return console.log("ROUND REDUCER won/lost"),Object(s.a)(Object(s.a)({},e),{},{ready:!1});case"RESET":return console.log("ROUND REDUCER reset"),Object(s.a)({},t.payload);default:return Object(s.a)({},e)}},u={ready:!1,started:!1},d=n(0),b={ready:null,started:null,set:{ready:function(){},start:function(){},lost:function(){},won:function(){},reset:function(){}}},f=r.a.createContext(b),_=f,j=function(e){var t=Object(a.useReducer)(l,u),n=Object(i.a)(t,2),r=n[0],o=n[1],c={ready:function(){o({type:"BOARD_SET"})},start:function(){o({type:"START_ROUND"})},lost:function(){o({type:"LOST"})},won:function(){o({type:"WON"})},reset:function(){o({type:"RESET",payload:Object(s.a)({},u)})}};return Object(d.jsx)(f.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{set:c}),children:e.children})},O={beginner:{rows:8,cols:8,ants:10,level:"beginner"},intermediate:{rows:16,cols:16,ants:40,level:"intermediate"},expert:{rows:24,cols:24,ants:99,level:"expert"}},p={rows:null,cols:null,ants:null,setParameters:function(e){}},m=r.a.createContext(p),g=m,h=function(e){var t=Object(a.useState)(O.beginner),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(d.jsx)(m.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{setParameters:function(e){o(e),console.log("PARAMS CONTEXT changing params")}}),children:e.children})},x={click:{last:null,current:null,set:function(e){}},key:{last:null,current:null,set:function(e){}}},y=r.a.createContext(x),v=y,w=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),l=s[0],u=s[1],b=Object(a.useState)(null),f=Object(i.a)(b,2),_=f[0],j=f[1],O=Object(a.useState)(null),p=Object(i.a)(O,2),m=p[0],g=p[1],h=Object(a.useCallback)((function(e){o(l),u(e)}),[l]),x=Object(a.useCallback)((function(e){j(m),g(e)}),[m]);return Object(d.jsx)(y.Provider,{value:{click:{last:r,current:l,set:h},key:{last:_,current:m,set:x}},children:e.children})},C=function(){var e=Object(a.useState)({x:0,y:0}),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(i.a)(o,2),s=c[0],l=c[1],u=function(){l(!1)};return{isDragging:s,grab:function(){l(!0)},drag:function(e){if(s){e.clientY>20&&e.clientX>20&&e.clientX<e.view.innerWidth-20?r((function(t){return{x:t.x+e.movementX,y:t.y+e.movementY}})):(r({x:0,y:0}),u())}},drop:u,translate:n}},S={overlay:{display:null,modalContent:null,hide:function(){},show:function(){},modal:function(e){}},dragMove:{translate:{x:null,y:null},isDragging:null,grab:function(){},drag:function(e){},drop:function(){}},minimize:{isMinimized:null,down:function(){},up:function(){}}},D=r.a.createContext(S),E=D,k=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),l=s[0],u=s[1],b=function(){r||o(!0)},f=Object(a.useState)(!1),_=Object(i.a)(f,2),O=_[0],p=_[1],m=C();return Object(d.jsx)(D.Provider,{value:{overlay:{display:r,modalContent:l,hide:function(){r&&o(!1),l&&u(null)},show:b,modal:function(e,t){u({title:e,content:t}),r||b()}},dragMove:m,minimize:{isMinimized:O,down:function(){p(!0)},up:function(){p(!1)}}},children:Object(d.jsx)(h,{children:Object(d.jsx)(j,{children:Object(d.jsx)(w,{children:e.children})})})})},B=n(17),R=n.n(B),A=n(6),N=function(){var e=Object(a.useRef)(),t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(-1),s=Object(i.a)(c,2),l=s[0],u=s[1],d=Object(a.useCallback)((function(){var e=l;l+1===r.length?e=0:e+=1,r[e].focus(),u(e)}),[r,l]),b=Object(a.useCallback)((function(){var e=l;l-1<0?e=r.length-1:e-=1,r[e].focus(),u(e)}),[r,l]);return Object(a.useEffect)((function(){e.current&&o([e.current].concat(Object(A.a)(e.current.querySelectorAll("a, button, textarea, input, select, .focusable"))))}),[e]),{ref:e,next:d,previous:b}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;a.key===e.trim()&&(console.log("".concat(a.key," detected!")),n&&a.shiftKey&&n(),t&&!a.shiftKey&&t(),a.preventDefault())},q=n(8),z=n.n(q),M=n(5),U=n.n(M),W=function(e){var t=C(),n=t.isDragging?"grabbing":"grab",a=N();return Object(d.jsxs)("article",{ref:a.ref,className:"focusable ".concat(z.a.modal),style:{transform:"translateX(".concat(t.translate.x,"px) translateY(").concat(t.translate.y,"px)")},onKeyDown:function(t){T("Escape",e.dismiss,null,t),T("Tab",a.next,a.previous,t)},tabIndex:0,children:[Object(d.jsxs)("nav",{className:U.a.titleBar,onPointerDown:t.grab,onPointerUp:t.drop,onPointerOut:t.drop,onPointerMove:t.drag,onMouseOver:null,style:{cursor:n},children:[Object(d.jsx)("span",{className:U.a.titleBar__left,children:Object(d.jsx)("h1",{id:z.a.modal__title,children:e.title})}),Object(d.jsx)("span",{className:U.a.titleBar__right,children:Object(d.jsx)("button",{onClick:e.dismiss,children:"\u2716"})})]}),Object(d.jsx)("section",{className:z.a.modal__contentWrapper,children:Object(d.jsx)("div",{className:z.a.modal__text,children:e.children})}),Object(d.jsx)("section",{className:z.a.modal__buttonWrapper,children:Object(d.jsx)("button",{className:z.a.modal__button,onClick:e.dismiss,children:Object(d.jsx)("span",{children:"OK"})})})]})},I=function(){var e=Object(a.useContext)(E),t=null;return e.overlay.modalContent&&(t=Object(d.jsx)(W,{dismiss:function(){e.overlay.hide()},title:e.overlay.modalContent.title,children:e.overlay.modalContent.content})),Object(d.jsx)("div",{className:e.overlay.display?R.a.overlay:R.a.overlay_hide,children:e.overlay.modalContent?t:null})},P={unclicked:"",clicked:"",ant:["0xD83D","0xDC1C"],flag:["0xD83D","0xDEA9"]},F={sleeping:["0xD83D","0xDE34"],smiling:["0xD83D","0xDE0A"],yelling:["0xD83D","0xDE31"],upsideDown:["0xD83D","0xDE43"],exploded:["0xD83E","0xDD2F"],shades:["0xD83D","0xDE0E"],xEyes:["0xD83D","0xDE35"],sweating:["0xD83D","0xDE13"],winking:["0xD83D","0xDE09"]},L=function(){var e=Object(a.useContext)(E),t=e.dragMove.isDragging?"grabbing":"grab";return Object(d.jsxs)("section",{className:"".concat(U.a.titleBar," ").concat(e.overlay.display?U.a["titleBar--inactive"]:""),onPointerDown:e.dragMove.grab,onPointerUp:e.dragMove.drop,onPointerOut:e.dragMove.drop,onPointerMove:e.dragMove.drag,onMouseOver:null,style:{cursor:t},children:[Object(d.jsxs)("span",{className:U.a.titleBar__left,children:[String.fromCharCode.apply(String,Object(A.a)(P.ant)),Object(d.jsx)("h1",{children:"Antsweeper"})]}),Object(d.jsxs)("span",{className:U.a.titleBar__right,children:[Object(d.jsx)("button",{className:U.a["--minimize"],onClick:e.minimize.down,children:"_"}),Object(d.jsx)("button",{disabled:!0,className:"button--focus",children:"\u2716"})]})]})},G=n(4),X=n.n(G),K=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(_),n=Object(a.useContext)(E);return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("ul",{className:X.a.dropdown__section,children:Object(d.jsx)("li",{onClick:function(){t.set.reset()},children:"New Game"})}),Object(d.jsx)("ul",{className:X.a.dropdown__section,children:["beginner","intermediate","expert"].map((function(t){return Object(d.jsx)("li",{onClick:function(){return function(t){e.setParameters(O[t])}(t)},className:e.level===t?X.a["--selected"]:null,children:t.charAt(0).toUpperCase()+t.slice(1)},"level-".concat(t))}))}),Object(d.jsx)("ul",{className:X.a.dropdown__section,children:Object(d.jsxs)("li",{className:" ".concat(X.a["--secondaryLetter"]),onClick:function(){n.overlay.modal("Best Times","boop!")},children:["Best ",Object(d.jsx)("span",{children:"T"}),"imes..."]})})]})},H=n(14),V=n.n(H),Y=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],o=function(){navigator.clipboard.writeText("erinruthmaness@gmail.com"),r(!0)};return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("h2",{children:"Welcome To Antsweeper!"}),Object(d.jsx)("p",{children:"This game recreates the old Windows Minesweeper game (but with ants - I garden a lot) using React and some concepts introduced by React hooks. I love reverse-engineering games and ideas using JavaScript, and I also love Minesweeper, so this was bound to happen eventually."}),Object(d.jsx)("p",{children:"I've been working on this project casually in my free time as I study my way back through React hooks, so it may be missing features when you see it."}),Object(d.jsxs)("p",{children:["I'm currently looking for a job! Click",Object(d.jsx)("strong",{children:Object(d.jsxs)("span",{className:"".concat(V.a.tooltip," ").concat(n?V.a["--emailCopied"]:"focusable "),onClick:o,onKeyPress:function(e){T("Enter",o,null,e)},tabIndex:0,children:["here",Object(d.jsx)("span",{className:V.a.tooltip__text,children:n?"Thank you!":"Click to copy my email address"})]})}),"to copy my email address."]})]})},J=function(){var e=Object(a.useContext)(E);return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("ul",{className:X.a.dropdown__section,children:Object(d.jsx)("a",{href:"https://github.com/erinruthmaness/antsweeper",children:Object(d.jsx)("li",{children:"Contents"})})}),Object(d.jsxs)("ul",{className:X.a.dropdown__section,children:[Object(d.jsx)("li",{onClick:function(){e.overlay.modal("About Antsweeper",Object(d.jsx)(Y,{}))},children:"What is Antsweeper?"}),Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",href:"http://www.minesweeper.info/wiki/Windows_Minesweeper",children:Object(d.jsx)("li",{children:"About Minesweeper..."})})]})]})},Z=function(e){return Object(d.jsxs)("aside",{className:X.a.dropdown,children:["Game"===e.which?Object(d.jsx)(K,{}):null,"Help"===e.which?Object(d.jsx)(J,{}):null]})},Q=n(10),$=n.n(Q),ee=function(e){var t=Object(a.useContext)(v),n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],c=r[1],s=Object(a.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1],f=Object(a.useCallback)((function(){o||c(!0)}),[o]),_=Object(a.useCallback)((function(){o&&(c(!1),b(!1))}),[o]);return Object(a.useEffect)((function(){var e=setTimeout((function(){o&&b(!0)}),500);return function(){return clearTimeout(e)}}),[o]),Object(a.useEffect)((function(){if(u&&t.click.current){if(t.click.current.target.id===e.buttonText+"-optionButton")return;o&&_()}}),[t.click,o,u,_,e.buttonText]),Object(d.jsxs)("div",{className:$.a.optionButton__wrapper,children:[Object(d.jsx)("button",{id:e.buttonText+"-optionButton",className:o?"".concat($.a.optionButton," ").concat($.a["optionButton--clicked"]):$.a.optionButton,onClick:function(e){o?_():f()},children:e.buttonText}),o?Object(d.jsx)(Z,{which:e.buttonText}):null]})},te=n(21),ne=n.n(te),ae=function(){return Object(d.jsxs)("nav",{className:ne.a.optionsBar,children:[Object(d.jsx)(ee,{buttonText:"Game"}),Object(d.jsx)(ee,{buttonText:"Help"})]})},re=function(){return Object(d.jsxs)("header",{children:[Object(d.jsx)(L,{}),Object(d.jsx)(ae,{})]})},oe=function(e,t){switch(t.type){case"RESET_BOARD":return console.log("BOARD REDUCER reset board"),Object(s.a)({},t.payload);case"CLEAR_BOARD":return console.log("BOARD REDUCER clear board"),Object(s.a)(Object(s.a)({},e),{},{board:[]});case"UNCOVER_BOARD":return console.log("BOARD REDUCER uncover board"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:F.smiling});case"SET_ANTS":return console.log("BOARD REDUCER set ants"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:F.smiling});case"UPDATE_BOARD":return console.log("BOARD REDUCER update board"),Object(s.a)(Object(s.a)({},e),t.payload);case"SET_FACE":return console.log("BOARD REDUCER set face"),Object(s.a)(Object(s.a)({},e),{},{face:t.payload});default:return Object(s.a)({},e)}},ce=function(e){return{board:[],level:e.level,parameters:{rows:e.rows,cols:e.cols,ants:e.ants,antList:[]},flags:0,face:F.sleeping}},ie=n(22),se=n.n(ie),le=function(e){return Object(d.jsx)("button",{className:se.a.faceButton,onClick:e.onClick,children:String.fromCharCode(e.face[0],e.face[1])})},ue=function(e,t){return e+"--"+t.toString()},de=n(7),be=n.n(de),fe=function(e){var t=e.display.toString().padStart(3,"0").split("");return t&&"off"!==t||(t=["8","8","8"]),Object(d.jsx)("section",{className:be.a.calcScreen,id:e.id,children:t.map((function(t,n){return Object(d.jsxs)("div",{className:"".concat(be.a.digit," ").concat(be.a[ue("digit",t)]),children:[Object(d.jsx)("div",{className:"".concat(be.a.digit__top," ").concat(be.a.digit__half)}),Object(d.jsx)("div",{className:"".concat(be.a.digit__bottom," ").concat(be.a.digit__half)})]},"".concat(e.id,"-digit-").concat(n))}))})},_e=n(23),je=n.n(_e),Oe=function(e){var t=Object(a.useState)("off"),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(e.firstClick),s=Object(i.a)(c,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){return e.firstClick&&!l&&u(!0),!e.firstClick&&l&&u(!1),function(){}}),[e.firstClick,l]),Object(a.useEffect)((function(){var t;return l&&e.inProgress&&e.firstClick&&(t=setInterval((function(){r<999&&o((function(e){return e+1}))}),1e3)),e.inProgress||clearInterval(t),function(){clearInterval(t)}}),[r,l,e.firstClick,e.inProgress]),Object(d.jsxs)("section",{className:je.a.controls,children:[Object(d.jsx)(fe,{id:"flags",display:e.inProgress||l?e.flags:"off"}),Object(d.jsx)(le,{onClick:function(){o(0),e.startGame()},face:e.face}),Object(d.jsx)(fe,{id:"timer",display:e.inProgress||l?r:"off"})]})},pe={squareResponse:function(e,t){return{which:e,face:t}},touchStart:function(e){return e?pe.squareResponse("touchStart",F.winking):pe.squareResponse("touchStart",F.yelling)},touchEnd:function(e){return console.log("touch end count is "+e),e>0?pe.squareResponse("right",F.smiling):pe.squareResponse("left",F.smiling)},mouseDown:function(e,t){return 1===e?t.flagged?pe.squareResponse("left",F.winking):pe.squareResponse("left",F.yelling):t.flagged?pe.squareResponse("right",F.sweating):pe.squareResponse("right",F.smiling)}},me=n(11),ge=n.n(me),he=!1,xe="left",ye=!1,ve=0;var we=function(e){var t=Object(a.useRef)(),n=function(){he=!1,xe="left",ye=!1,ve=0},r=function(t,a){if(e.gameOver)n();else if(!(ye||e.sq.revealed||e.sq.flagged&&1===t.nativeEvent.which))if("down"===a){he=!0;var r=pe.mouseDown(t.nativeEvent.which,e);xe=r.which,e.changeFace(r.face)}else"up"===a&&(ye||c(xe))},o=function(a){if(e.gameOver)n();else if(!(e.gameOver||he||e.sq.revealed))if("start"===a)ye=!0,e.changeFace(pe.touchStart(e.sq.flagged).face),t.current=setInterval((function(){ve++}),800);else if("end"===a){clearInterval(t.current);var r=pe.touchEnd(ve);if(e.sq.flagged&&"left"===r.which)return void e.changeFace(r.face);c(r.which)}},c=function(t){xe="left",ve=0,e.onClick(e.sq.y,e.sq.x,t.toUpperCase()+"_CLICK")};return Object(d.jsx)("button",{className:"\n        ".concat(ge.a.square,"\n        ").concat(e.sq.revealed&&ge.a["square--clicked"]," \n        ").concat(ge.a[ue("nearbys",e.sq.nearbyAnts)],"\n        ").concat(e.sq.revealed&&e.sq.ant&&!e.sq.unclickedAnt?ge.a.firstAnt:null," \n      "),onMouseDown:function(e){return r(e,"down")},onMouseUp:ye?void 0:function(e){return r(e,"up")},onTouchStart:function(){return o("start")},onTouchEnd:he?void 0:function(){return o("end")},onContextMenu:function(e){return e.preventDefault()},children:Array.isArray(e.sq.display)?String.fromCharCode(e.sq.display[0],e.sq.display[1]):e.sq.display})},Ce=n(24),Se=n.n(Ce),De=function(e){return e.boardGrid.map((function(t,n){return Object(d.jsx)("div",{className:Se.a.board_row,children:t.map((function(t){return Object(d.jsx)(we,{id:t.key,sq:t,onClick:e.handleSquareClick,changeFace:e.setFace,gameOver:!e.gameInProgress},t.key)}))},"row-".concat(n))}))},Ee=function(e,t){return{key:"cell-x"+e+"-y"+t,x:e,y:t,ant:!1,revealed:!1,display:P.unclicked,flagged:!1,nearbyAnts:0,neighbors:[]}},ke=function(e,t){return Array.from(Array(e),(function(e,n){return Array.from(Array(t),(function(e,t){return Ee(t,n)}))}))},Be=function(e,t){for(var n=Array.from(Array(e),(function(e,t){return{id:t+1,ant:!1}})),a=0;a<t;a++)n[a].ant=!0;return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n)},Re=function(e){var t=e.parameters.rows*e.parameters.cols,n=Be(t,e.parameters.ants),a=t-1,r=[];return e.board.forEach((function(e){e.forEach((function(e){e.ant=n[a].ant,a--,e.ant&&r.push(e.key)}))})),[e.board,r]},Ae=function(e,t){var n=!1;return t.forEach((function(t){null!==t&&e.some((function(e){return e===t.key}))&&(n=!0)})),n},Ne=function(e,t){return[t-1>=0?e[t-1]:null,e[t],t+1<e.length?e[t+1]:null]},Te=function(e,t,n){var a=t-1>=0?Ne(e[t-1],n):[null,null,null],r=Ne(e[t],n),o=t+1<e.length?Ne(e[t+1],n):[null,null,null];return a.concat(r,o)},qe=function(e,t,n){return function(e,t){var n,a=e.board,r=[];do{var o=Re(e),c=Object(i.a)(o,2);a=c[0],r=c[1]}while(Ae(r,t));return[(n=a,n.forEach((function(e,t){e.forEach((function(e,a){var r=0,o=Te(n,t,a);o.forEach((function(e){e&&e.ant&&r++})),e.nearbyAnts=r,e.neighbors=o.filter((function(e){return null!==e}))}))})),n),r]}(e,Te(e.board,t,n))},ze={won:function(){console.log("yeah")},lost:function(){console.log("oh no")}},Me=function e(t,n){return t.neighbors.forEach((function(t){n[t.y][t.x].revealed||(n[t.y][t.x]=Object(s.a)(Object(s.a)({},t),{},{revealed:!0,display:0===t.nearbyAnts?"":t.nearbyAnts}),0===t.nearbyAnts&&(n=e(t,n)))})),n},Ue=function(e,t){var n=t;return e.neighbors.forEach((function(e){t[e.y][e.x].revealed||(t[e.y][e.x]=Object(s.a)(Object(s.a)({},e),{},{revealed:!0,display:0===e.nearbyAnts?"":e.nearbyAnts}),0===e.nearbyAnts&&(t=Me(e,t)))})),n},We=function(e,t){console.log("new square:"),console.log(t);var n=Object(A.a)(e);return n[t.y][t.x]=t,Object(A.a)(n)},Ie=function(e,t){switch(console.log(t),t.type){case"LEFT_CLICK":if(t.payload.flagged||t.payload.revealed)return{newBoardState:Object(s.a)(Object(s.a)({},e),{},{face:F.smiling}),gameOver:!1};if(t.payload.ant){var n=We(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.ant,revealed:!0}));return{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:(c=n,i=e.parameters.antList,c.forEach((function(e,t){c.forEach((function(e,n){-1===i.indexOf(c[t][n].key)||c[t][n].revealed||c[t][n].flagged||(c[t][n]=Object(s.a)(Object(s.a)({},c[t][n]),{},{display:P.ant,revealed:!0,unclickedAnt:!0}))}))})),c),face:F.exploded}),gameOver:!0}}var a=F.smiling,r=!1,o=We(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:0===t.payload.nearbyAnts?"":t.payload.nearbyAnts,revealed:!0}));return function(e,t){var n=t.rows*t.cols-t.ants;return e.forEach((function(t,a){e.forEach((function(t,r){!e[a][r].ant&&e[a][r].revealed&&n--}))})),0===n}(e.board,e.parameters)&&(a=F.shades,r=!0),0===t.payload.nearbyAnts&&(o=Ue(t.payload,o)),{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:o,face:a}),gameOver:r};case"RIGHT_CLICK":return t.payload.flagged?{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:We(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.unclicked,revealed:!1,flagged:!1})),face:F.smiling,flags:e.flags+1}),gameOver:!1}:e.flags>0?{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:We(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.flag,revealed:!1,flagged:!0})),face:F.smiling,flags:e.flags-1}),gameOver:!1}:{newBoardState:Object(s.a)(Object(s.a)({},e),{},{face:F.smiling}),gameOver:!1};default:return void console.log("squareClick reducer error: ",t.type)}var c,i},Pe=n(18),Fe=n.n(Pe),Le=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(_),n=Object(a.useReducer)(oe,ce(e)),r=Object(i.a)(n,2),o=r[0],c=r[1],l=Object(a.useCallback)((function(){c({type:"RESET_BOARD",payload:ce(e)}),t.set.reset()}),[e,t.set]),u=Object(a.useCallback)((function(e,n,a){if(!t.started){var r=qe(o,e,n),l=Object(i.a)(r,2),u=l[0],d=l[1];console.log(u),c({type:"SET_ANTS",payload:{board:u,parameters:Object(s.a)(Object(s.a)({},o.parameters),{},{antList:d})}}),t.set.start()}console.log(o.board[e][n]);var b=Ie(Object(s.a)({},o),{type:a,payload:o.board[e][n]}),f=b.newBoardState,_=b.gameOver;_&&f.face===F.exploded?(t.set.lost(),ze.lost()):_&&f.face===F.shades&&(t.set.won(),ze.won()),c({type:"UPDATE_BOARD",payload:{board:f.board,face:f.face,flags:f.flags}})}),[o,t]);return Object(a.useEffect)((function(){(e.level!==o.level||!t.ready&&!t.started&&o.board.length>0)&&l()}),[e.level,o.level,o.board,t,l]),Object(d.jsxs)("article",{className:Fe.a.gameWrapper,children:[Object(d.jsx)(Oe,{startGame:function(){t.started&&l(),c({type:"CLEAR_BOARD"}),c({type:"UNCOVER_BOARD",payload:{board:ke(o.parameters.rows,o.parameters.cols),parameters:Object(s.a)({},o.parameters),flags:o.parameters.ants}}),t.set.ready()},inProgress:t.ready,face:o.face,flags:o.flags,firstClick:t.started}),Object(d.jsx)("section",{className:Fe.a.boardWrapper,children:o.board?Object(d.jsx)(De,{boardGrid:o.board,handleSquareClick:u,setFace:function(e){c({type:"SET_FACE",payload:e})},gameInProgress:t.ready}):null})]})},Ge=n(15),Xe=n.n(Ge),Ke=function(){var e=Object(a.useContext)(E),t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],b=Object(a.useState)(!1),f=Object(i.a)(b,2),_=f[0],j=f[1];return Object(a.useCallback)((function(){console.log("window usecallback"),e.minimize.isMinimized&&!l&&o("window--minimizing"),e.minimize.isMinimized||_||o("window--maximizing")}),[e.minimize.isMinimized,l,_]),Object(d.jsx)("main",{className:"focusable ".concat(Xe.a.window," ").concat(r?Xe.a[r]:""," ").concat(e.minimize.isMinimized?Xe.a["window--minimized"]:""),tabIndex:0,style:{transform:e.minimize.isMinimized?"none":"translateX(".concat(e.dragMove.translate.x,"px) translateY(").concat(e.dragMove.translate.y,"px)")},onAnimationEnd:function(){console.log("animation ended"),"window--minimizing"===r?(o(""),u(!0),j(!1)):"window--maximizing"===r&&(o(""),j(!0),u(!1))},onAnimationStart:function(){console.log("animation started")},children:e.minimize.isMinimized?null:Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(re,{}),Object(d.jsx)(Le,{})]})})},He=n.p+"static/media/win98Logo.c4af9ed5.png",Ve=n(12),Ye=n.n(Ve),Je=function(){var e=Object(a.useContext)(E),t=Ye.a.gameWindowButton;e.minimize.isMinimized||(t="".concat(Ye.a.gameWindowButton," button--focus"));return Object(d.jsxs)("footer",{className:Ye.a.bg__footer,children:[Object(d.jsxs)("button",{id:"windows_start",className:Ye.a.startButton,children:[Object(d.jsx)("img",{src:He,alt:"Windows 98 Logo"})," Start"]}),Object(d.jsxs)("button",{id:"antsweeper_min",className:t,onClick:function(){e.minimize.isMinimized?e.minimize.up():e.minimize.down()},children:[String.fromCharCode.apply(String,Object(A.a)(P.ant))," Antsweeper"]})]})},Ze=n(25),Qe=n.n(Ze);var $e=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(v);return Object(a.useEffect)((function(){document.addEventListener("click",t.click.set),document.addEventListener("keypress",t.key.set)}),[t]),Object(d.jsxs)("div",{className:"".concat(e.level," ").concat(Qe.a.window_container),children:[Object(d.jsx)(Ke,{}),Object(d.jsx)(Je,{})]})};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(k,{children:Object(d.jsx)($e,{})})}),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.84d7deac.chunk.js.map