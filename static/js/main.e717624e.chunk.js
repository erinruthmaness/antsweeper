(this.webpackJsonpantsweeper=this.webpackJsonpantsweeper||[]).push([[0],[,,,,function(e,n,t){e.exports={page_nav:"Nav_page_nav__32hbe",menu_bar:"Nav_menu_bar__1Wd_V",menu_bar__left:"Nav_menu_bar__left__2NIfd",game_title:"Nav_game_title__1sJIF",menu_bar__right:"Nav_menu_bar__right__3fjxf",windows95_button:"Nav_windows95_button__1wMlA",wc_box:"Nav_wc_box__1Y4PR",wc_minimize:"Nav_wc_minimize__HgzvC",wc_maximize:"Nav_wc_maximize__1kmjj",wc_close:"Nav_wc_close__37RhD",dropdown_menu:"Nav_dropdown_menu__3MjM8"}},function(e,n,t){e.exports={dropdown_menu__overlay:"NavDropdown_dropdown_menu__overlay__1vh5w",dropdown_menu:"NavDropdown_dropdown_menu__24OSv",dropdown_menu_contents:"NavDropdown_dropdown_menu_contents__3DXNI",dropdown_menu_section:"NavDropdown_dropdown_menu_section__3rA6W",selected:"NavDropdown_selected__1ciF4"}},function(e,n,t){e.exports={calc_screen:"CalcScreen_calc_screen__3Jm5D",calc_screen__digit:"CalcScreen_calc_screen__digit__oHexV",digit_half:"CalcScreen_digit_half__3hRzf",digit_0:"CalcScreen_digit_0__2hMxY",num_top:"CalcScreen_num_top__3D59g",num_bottom:"CalcScreen_num_bottom__1Zo0E",digit_4:"CalcScreen_digit_4__v_OyT",digit_1:"CalcScreen_digit_1__3RcD3",digit_7:"CalcScreen_digit_7__2sjK1",digit_2:"CalcScreen_digit_2__2rVcQ",digit_5:"CalcScreen_digit_5__2wuv2",digit_3:"CalcScreen_digit_3__3ZfAq",digit_9:"CalcScreen_digit_9__3zGtB",digit_6:"CalcScreen_digit_6__39qNG"}},,function(e,n,t){e.exports={board_controls:"Controls_board_controls__1JNZk",calc_screen__wrapper:"Controls_calc_screen__wrapper___eClM"}},function(e,n,t){e.exports={grid_square:"Square_grid_square__3dfUa",clicked_square:"Square_clicked_square__1MzAG",nearbys_0:"Square_nearbys_0__3plNI",nearbys_1:"Square_nearbys_1__2iPhU",nearbys_2:"Square_nearbys_2__2DZsw",nearbys_3:"Square_nearbys_3__1Trt5",nearbys_4:"Square_nearbys_4__20VH4",nearbys_5:"Square_nearbys_5__1c659",nearbys_6:"Square_nearbys_6__1o2Ev",nearbys_7:"Square_nearbys_7__1kEkC",nearbys_8:"Square_nearbys_8__38SI4",first_ant:"Square_first_ant__3lNBE"}},function(e,n,t){e.exports={window__inner:"Board_window__inner__2hVC3",board__outer:"Board_board__outer__1Ibmj",board__inner:"Board_board__inner__1X72h",beginner:"Board_beginner__1Vunc",intermediate:"Board_intermediate__2FQXG",expert:"Board_expert__11op2"}},,,function(e,n,t){e.exports={dropdown_wrapper:"NavButton_dropdown_wrapper__1fgg3",dropdown_choice:"NavButton_dropdown_choice__2Lgkn"}},function(e,n,t){e.exports={main_window:"Window_main_window__2_sgA",beginner:"Window_beginner__RV9Qn",intermediate:"Window_intermediate__2oKcM",expert:"Window_expert__3zkuZ"}},,function(e,n,t){e.exports={control_button:"FaceButton_control_button__1dOGs"}},function(e,n,t){e.exports={board_row:"SquaresWrapper_board_row__2PoFP"}},function(e,n,t){e.exports={windows_footer:"Footer_windows_footer__ht17i"}},function(e,n,t){e.exports={App:"App_App__1EnJK"}},,,,,,function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),c=t(15),s=t.n(c),o=(t(25),t(1)),i=t(3),l={beginner:{rows:8,cols:8,ants:10,level:"beginner"},intermediate:{rows:16,cols:16,ants:40,level:"intermediate"},expert:{rows:24,cols:24,ants:99,level:"expert"}},_=function(e,n){switch(n.type){case"BOARD_SET":return console.log("ROUND REDUCER board set"),Object(o.a)(Object(o.a)({},e),{},{ready:!0,started:!1});case"START_ROUND":return console.log("ROUND REDUCER start round"),Object(o.a)(Object(o.a)({},e),{},{started:!0});case"WON":case"LOST":return console.log("ROUND REDUCER won/last"),Object(o.a)(Object(o.a)({},e),{},{ready:!1});case"RESET":return console.log("ROUND REDUCER reset"),Object(o.a)({},n.payload);default:return Object(o.a)({},e)}},u={ready:!1,started:!1},d=t(0),f={ready:null,started:null,set:{ready:function(){},start:function(){},lost:function(){},won:function(){},reset:function(){}}},b=r.a.createContext(f),j=b,p=function(e){var n=Object(a.useReducer)(_,u),t=Object(i.a)(n,2),r=t[0],c=t[1],s={ready:function(){c({type:"BOARD_SET"})},start:function(){c({type:"START_ROUND"})},lost:function(){c({type:"LOST"})},won:function(){c({type:"WON"})},reset:function(){c({type:"RESET",payload:Object(o.a)({},u)})}};return Object(d.jsx)(b.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{set:s}),children:e.children})},O={rows:null,cols:null,ants:null,setParameters:function(e){}},g=r.a.createContext(O),m=g,w=function(e){var n=Object(a.useState)(l.beginner),t=Object(i.a)(n,2),r=t[0],c=t[1];return Object(d.jsx)(g.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{setParameters:function(e){c(e),console.log("PARAMS CONTEXT changing params")}}),children:Object(d.jsx)(p,{children:e.children})})},h=t(5),x=t.n(h),v=function(e){var n=Object(a.useContext)(m),t=Object(a.useContext)(j);return Object(d.jsxs)("li",{className:x.a.dropdown_menu_contents,children:[Object(d.jsx)("ul",{className:x.a.dropdown_menu_section,children:Object(d.jsx)("li",{onClick:function(){e.dismiss(),t.set.reset()},children:"New Game"})}),Object(d.jsx)("ul",{className:x.a.dropdown_menu_section,children:["beginner","intermediate","expert"].map((function(t){return Object(d.jsx)("li",{onClick:function(){return function(t){e.dismiss(),n.setParameters(l[t])}(t)},className:n.level===t?x.a.selected:null,children:t.charAt(0).toUpperCase()+t.slice(1)},"level-".concat(t))}))})]})},y=function(e){return Object(d.jsxs)("ul",{className:x.a.dropdown_menu,children:[Object(d.jsx)("div",{className:x.a.dropdown_menu__overlay,onClick:e.dismiss}),"Game"===e.which?Object(d.jsx)(v,{dismiss:e.dismiss}):null,(e.which,null)]})},D=t(13),C=t.n(D),E=function(e){var n=Object(a.useState)(!1),t=Object(i.a)(n,2),r=t[0],c=t[1],s=function(){c((function(e){return!e}))};return Object(d.jsxs)("li",{className:C.a.dropdown_wrapper,children:[Object(d.jsx)("button",{className:C.a.dropdown_choice,onClick:s,children:e.buttonText}),r?Object(d.jsx)(y,{which:e.buttonText,dismiss:s}):null]})},N=t(4),R=t.n(N),S=function(){return Object(d.jsxs)("header",{className:R.a.page_nav,children:[Object(d.jsxs)("section",{className:R.a.menu_bar,children:[Object(d.jsxs)("span",{className:R.a.menu_bar__left,children:[String.fromCharCode("0xD83D","0xDC1C"),Object(d.jsx)("span",{className:R.a.game_title,children:"Antsweeper"})]}),Object(d.jsxs)("span",{className:"".concat(R.a.menu_bar__right," ").concat(R.a.wc_box),disabled:!0,children:[Object(d.jsx)("button",{className:R.a.wc_minimize}),Object(d.jsx)("button",{className:R.a.wc_maximize}),Object(d.jsx)("button",{className:R.a.wc_close})]})]}),Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{className:R.a.dropdown_menu,children:[Object(d.jsx)(E,{buttonText:"Game"}),Object(d.jsx)(E,{buttonText:"Help"})]})})]})},A=t(20),q={unclicked:"",clicked:"",ant:["0xD83D","0xDC1C"],flag:["0xD83D","0xDEA9"]},k={sleeping:["0xD83D","0xDE34"],smiling:["0xD83D","0xDE0A"],yelling:["0xD83D","0xDE31"],upsideDown:["0xD83D","0xDE43"],exploded:["0xD83E","0xDD2F"],shades:["0xD83D","0xDE0E"],xEyes:["0xD83D","0xDE35"],sweating:["0xD83D","0xDE13"],winking:["0xD83D","0xDE09"]},T=function(e,n){switch(n.type){case"RESET_BOARD":return console.log("BOARD REDUCER reset board"),Object(o.a)({},n.payload);case"CLEAR_BOARD":return console.log("BOARD REDUCER clear board"),Object(o.a)(Object(o.a)({},e),{},{board:[]});case"UNCOVER_BOARD":return console.log("BOARD REDUCER uncover board"),Object(o.a)(Object(o.a)(Object(o.a)({},e),n.payload),{},{face:k.smiling});case"SET_ANTS":return console.log("BOARD REDUCER set ants"),Object(o.a)(Object(o.a)(Object(o.a)({},e),n.payload),{},{face:k.smiling});case"UPDATE_BOARD":return console.log("BOARD REDUCER update board"),Object(o.a)(Object(o.a)({},e),n.payload);case"SET_FACE":return console.log("BOARD REDUCER set face"),Object(o.a)(Object(o.a)({},e),{},{face:n.payload});default:return Object(o.a)({},e)}},B=function(e){return{board:[],level:e.level,parameters:{rows:e.rows,cols:e.cols,ants:e.ants,antList:[]},flags:0,face:k.sleeping}},U=t(16),P=t.n(U),F=function(e){return Object(d.jsx)("button",{className:"windows95 ".concat(P.a.control_button),onClick:e.onClick,children:String.fromCharCode(e.face[0],e.face[1])})},I=function(e,n){return e+"_"+n.toString()},M=t(6),G=t.n(M),z=function(e){var n=e.display.toString().padStart(3,"0").split("");return n&&"off"!==n||(n=["8","8","8"]),Object(d.jsx)("section",{className:G.a.calc_screen,id:e.id,children:n.map((function(n,t){return Object(d.jsxs)("div",{className:"".concat(G.a.calc_screen__digit," ").concat(G.a[I("digit",n)]),children:[Object(d.jsx)("div",{className:"".concat(G.a.num_top," ").concat(G.a.digit_half)}),Object(d.jsx)("div",{className:"".concat(G.a.num_bottom," ").concat(G.a.digit_half)})]},"".concat(e.id,"-digit-").concat(t))}))})},V=t(8),W=t.n(V),L=function(e){var n=Object(a.useState)("off"),t=Object(i.a)(n,2),r=t[0],c=t[1],s=Object(a.useState)(e.firstClick),o=Object(i.a)(s,2),l=o[0],_=o[1];return Object(a.useEffect)((function(){return e.firstClick&&!l&&_(!0),!e.firstClick&&l&&_(!1),function(){}}),[e.firstClick,l]),Object(a.useEffect)((function(){var n;return l&&e.inProgress&&e.firstClick&&(n=setInterval((function(){r<1e3&&c((function(e){return e+1}))}),1e3)),e.inProgress||clearInterval(n),function(){clearInterval(n)}}),[r,l,e.firstClick,e.inProgress]),Object(d.jsxs)("nav",{className:W.a.board_controls,children:[Object(d.jsx)("div",{className:W.a.calc_screen__wrapper,children:Object(d.jsx)(z,{id:"flags",display:e.inProgress||l?e.flags:"off"})}),Object(d.jsx)("div",{className:W.a.face_button__wrapper,children:Object(d.jsx)(F,{onClick:function(){c(0),e.startGame()},face:e.face})}),Object(d.jsx)("div",{className:W.a.calc_screen__wrapper,children:Object(d.jsx)(z,{id:"timer",display:e.inProgress||l?r:"off"})})]})},J={squareResponse:function(e,n){return{which:e,face:n}},touchStart:function(e){return e?J.squareResponse("touchStart",k.winking):J.squareResponse("touchStart",k.yelling)},touchEnd:function(e){return console.log("touch end count is "+e),e>0?J.squareResponse("right",k.smiling):J.squareResponse("left",k.smiling)},mouseDown:function(e,n){return 1===e?n.flagged?J.squareResponse("left",k.winking):J.squareResponse("left",k.yelling):n.flagged?J.squareResponse("right",k.sweating):J.squareResponse("right",k.smiling)}},Z={routeClick:function(e,n,t){return"left"===n?Z.leftClick(e,t):"right"===n?Z.rightClick(e,t):void 0},leftClick:function(e,n){return e.flagged||e.revealed?{square:e,face:k.smiling}:e.ant?{square:Object(o.a)(Object(o.a)({},e),{},{display:q.ant,revealed:!0}),face:k.exploded,flags:n}:{square:Object(o.a)(Object(o.a)({},e),{},{display:0===e.nearbyAnts?"":e.nearbyAnts,revealed:!0}),face:k.smiling,flags:n}},rightClick:function(e,n){return e.flagged?{square:Object(o.a)(Object(o.a)({},e),{},{display:q.unclicked,revealed:!1,flagged:!1}),face:k.smiling,flags:n+1}:n>0?{square:Object(o.a)(Object(o.a)({},e),{},{display:q.flag,revealed:!1,flagged:!0}),face:k.smiling,flags:n-1}:{square:Object(o.a)({},e),face:k.smiling,flags:n}}},H=t(9),X=t.n(H),K=!1,Q="left",Y=!1,$=0;var ee=function(e){var n=Object(a.useRef)(),t=function(){K=!1,Q="left",Y=!1,$=0},r=function(n,a){if(e.gameOver)t();else if(!(Y||e.sq.revealed||e.sq.flagged&&1===n.nativeEvent.which))if("down"===a){K=!0;var r=J.mouseDown(n.nativeEvent.which,e);Q=r.which,e.changeFace(r.face)}else"up"===a&&(Y||s(Q))},c=function(a){if(e.gameOver)t();else if(!(e.gameOver||K||e.sq.revealed))if("start"===a)Y=!0,e.changeFace(J.touchStart(e.sq.flagged).face),n.current=setInterval((function(){$++}),800);else if("end"===a){clearInterval(n.current);var r=J.touchEnd($);if(e.sq.flagged&&"left"===r.which)return void e.changeFace(r.face);s(r.which)}},s=function(n){Q="left",$=0,e.onClick(e.sq.row,e.sq.col,n)};return Object(d.jsx)("button",{className:"\n        windows95 \n        ".concat(X.a.grid_square," \n        ").concat(e.sq.revealed&&X.a.clicked_square," \n        ").concat(X.a[I("nearbys",e.sq.nearbyAnts)],"\n        ").concat(e.sq.revealed&&e.sq.ant&&!e.sq.unclickedAnt&&X.a.first_ant," \n      "),onMouseDown:function(e){return r(e,"down")},onMouseUp:Y?void 0:function(e){return r(e,"up")},onTouchStart:function(){return c("start")},onTouchEnd:K?void 0:function(){return c("end")},onContextMenu:function(e){return e.preventDefault()},children:Array.isArray(e.sq.display)?String.fromCharCode(e.sq.display[0],e.sq.display[1]):e.sq.display})},ne=t(17),te=t.n(ne),ae=function(e){return e.boardGrid.map((function(n,t){return Object(d.jsx)("div",{className:te.a.board_row,children:n.map((function(n){return Object(d.jsx)(ee,{id:n.key,sq:n,onClick:e.handleSquareClick,changeFace:e.setFace,gameOver:!e.gameInProgress},n.key)}))},"row-".concat(t))}))},re=function(e,n){return Array.from(Array(e),(function(e,t){return Array.from(Array(n),(function(e,n){return function(e,n){return{key:"cell-"+e+"-"+n,row:e,col:n,ant:!1,revealed:!1,display:q.unclicked,flagged:!1,nearbyAnts:0,neighbors:[]}}(t,n)}))}))},ce=function(e,n){return[n-1>=0?e[n-1]:null,e[n],n+1<e.length?e[n+1]:null]},se=function(e,n,t){var a=n-1>=0?ce(e[n-1],t):[null,null,null],r=ce(e[n],t),c=n+1<e.length?ce(e[n+1],t):[null,null,null];return a.concat(r,c)},oe=function(e,n){for(var t=Array.from(Array(e),(function(e,n){return{id:n+1,ant:!1}})),a=0;a<n;a++)t[a].ant=!0;return function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(t)},ie=function(e){var n=e.parameters.rows*e.parameters.cols,t=oe(n,e.parameters.ants),a=n-1,r=[];return e.board.forEach((function(e){e.forEach((function(e){e.ant=t[a].ant,a--,e.ant&&r.push(e.key)}))})),[e.board,r]},le=function(e,n){var t=!1;return n.forEach((function(n){null!==n&&e.some((function(e){return e===n.key}))&&(t=!0)})),t},_e=function(e,n){var t,a=e.board,r=[];do{var c=ie(e),s=Object(i.a)(c,2);a=s[0],r=s[1]}while(le(r,n));return[(t=a,t.forEach((function(e,n){e.forEach((function(e,a){var r=0,c=se(t,n,a);c.forEach((function(e){e&&e.ant&&r++})),e.nearbyAnts=r,e.neighbors=c.filter((function(e){return null!==e}))}))})),t),r]},ue=function e(n,t){return n.neighbors.forEach((function(n){t[n.row][n.col].revealed||(t[n.row][n.col]=Object(o.a)(Object(o.a)({},n),{},{revealed:!0,display:0===n.nearbyAnts?"":n.nearbyAnts}),0===n.nearbyAnts&&(t=e(n,t)))})),t},de=t(10),fe=t.n(de),be=function(){var e=Object(a.useContext)(m),n=Object(a.useContext)(j),t=Object(a.useReducer)(T,B(e)),r=Object(i.a)(t,2),c=r[0],s=r[1],l=Object(a.useCallback)((function(){s({type:"RESET_BOARD",payload:B(e)}),n.set.reset()}),[e,n.set]),_=Object(a.useCallback)((function(e,t,a){if(!n.started){var r=se(c.board,e,t),l=_e(c,r),_=Object(i.a)(l,2),u=_[0],d=_[1];s({type:"SET_ANTS",payload:{board:u,parameters:Object(o.a)(Object(o.a)({},c.parameters),{},{antList:d})}}),n.set.start()}var f,b,j=Object(A.a)(c.board),p=c.board[e][t],O=Z.routeClick(p,a,c.flags);j[e][t]=O.square,O.square.revealed&&(O.square.ant&&(n.set.lost(),f=j,b=c.parameters.antList,f.forEach((function(e,n){f.forEach((function(e,t){-1===b.indexOf(f[n][t].key)||f[n][t].revealed||f[n][t].flagged||(f[n][t]=Object(o.a)(Object(o.a)({},f[n][t]),{},{display:q.ant,revealed:!0,unclickedAnt:!0}))}))})),j=f),function(e,n){var t=n.rows*n.cols-n.ants;return e.forEach((function(n,a){e.forEach((function(n,r){!e[a][r].ant&&e[a][r].revealed&&t--}))})),0===t}(j,c.parameters)&&!O.square.ant&&(O.face=k.shades,n.set.won()),0===O.square.nearbyAnts&&(j=function(e,n){var t=n;return e.neighbors.forEach((function(e){n[e.row][e.col].revealed||(n[e.row][e.col]=Object(o.a)(Object(o.a)({},e),{},{revealed:!0,display:0===e.nearbyAnts?"":e.nearbyAnts}),0===e.nearbyAnts&&(n=ue(e,n)))})),t}(O.square,j))),s({type:"UPDATE_BOARD",payload:{board:j,face:O.face,flags:O.flags}})}),[c,n]);return Object(a.useEffect)((function(){(e.level!==c.level||!n.ready&&!n.started&&c.board.length>0)&&l()}),[e.level,c.level,c.board,n,l]),Object(d.jsx)("section",{className:fe.a.window__inner,children:Object(d.jsxs)("div",{className:fe.a.board__outer,children:[Object(d.jsx)(L,{startGame:function(){n.started&&l(),s({type:"CLEAR_BOARD"}),s({type:"UNCOVER_BOARD",payload:{board:re(c.parameters.rows,c.parameters.cols),parameters:Object(o.a)({},c.parameters),flags:c.parameters.ants}}),n.set.ready()},inProgress:n.ready,face:c.face,flags:c.flags,firstClick:n.started}),Object(d.jsx)("section",{className:"".concat(fe.a.board__inner," ").concat(fe.a[e.level]),children:c.board?Object(d.jsx)(ae,{boardGrid:c.board,handleSquareClick:_,setFace:function(e){s({type:"SET_FACE",payload:e})},gameInProgress:n.ready}):null})]})})},je=t(14),pe=t.n(je),Oe=function(){var e=Object(a.useContext)(m);return Object(d.jsxs)("main",{className:"windows95 ".concat(pe.a.main_window," ").concat(pe.a[e.level]),children:[Object(d.jsx)(S,{}),Object(d.jsx)(be,{})]})},ge=t(18),me=t.n(ge),we=function(){return Object(d.jsxs)("footer",{className:"windows95 ".concat(me.a.windows_footer),children:[Object(d.jsx)("span",{}),Object(d.jsx)("span",{})]})},he=t(19),xe=t.n(he);var ve=function(){return Object(d.jsxs)("div",{className:xe.a.App,children:[Object(d.jsx)(Oe,{}),Object(d.jsx)(we,{})]})};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(w,{children:Object(d.jsx)(ve,{})})}),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.e717624e.chunk.js.map