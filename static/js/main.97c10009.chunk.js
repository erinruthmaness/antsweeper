(this.webpackJsonpantsweeper=this.webpackJsonpantsweeper||[]).push([[0],[,,,,function(e,t,n){e.exports={dropdown:"OptionDropdown_dropdown__38DRP","dropdown--open":"OptionDropdown_dropdown--open__33UTA",slideup:"OptionDropdown_slideup__2pYIm",dropdown__section:"OptionDropdown_dropdown__section__3j9XG",delayRender:"OptionDropdown_delayRender__3rVI5","--comingSoon":"OptionDropdown_--comingSoon__2sopC","--secondaryLetter":"OptionDropdown_--secondaryLetter__11di5","--selected":"OptionDropdown_--selected__TfmbY"}},function(e,t,n){e.exports={titleBar:"TitleBar_titleBar__2RV-D","titleBar--inactive":"TitleBar_titleBar--inactive__29J5I",titleBar__left:"TitleBar_titleBar__left__3-CBo",titleBar__right:"TitleBar_titleBar__right__jGHgj","--minimize":"TitleBar_--minimize__2uDpQ"}},,function(e,t,n){e.exports={calcScreen:"CalcScreen_calcScreen__RRwXz",digit:"CalcScreen_digit__3VlIu",digit__half:"CalcScreen_digit__half__1eycv","digit--0":"CalcScreen_digit--0__1KEH2",digit__top:"CalcScreen_digit__top__1HcA_",digit__bottom:"CalcScreen_digit__bottom__1ewoz","digit--4":"CalcScreen_digit--4__bd3kX","digit--1":"CalcScreen_digit--1__2KQOB","digit--7":"CalcScreen_digit--7__2xAR6","digit--2":"CalcScreen_digit--2__1qZG-","digit--5":"CalcScreen_digit--5__21DdK","digit--3":"CalcScreen_digit--3__2vEfU","digit--9":"CalcScreen_digit--9__1HSCG","digit--6":"CalcScreen_digit--6__3O4Ms"}},function(e,t,n){e.exports={modal:"Modal_modal__yPXXe",modal__title:"Modal_modal__title__o1iZp",modal__contentWrapper:"Modal_modal__contentWrapper__2i-hy",modal__text:"Modal_modal__text__Yqd0o",modal__button:"Modal_modal__button__dEVgJ"}},,function(e,t,n){e.exports={optionButton__wrapper:"OptionWrapper_optionButton__wrapper__-QcGI",optionButton:"OptionWrapper_optionButton__3MnEC","optionButton--clicked":"OptionWrapper_optionButton--clicked__15pvZ"}},function(e,t,n){e.exports={square:"Square_square__29Uf2","square--clicked":"Square_square--clicked__3goIH","nearbys--0":"Square_nearbys--0__3B9BU","nearbys--1":"Square_nearbys--1__2rv_l","nearbys--2":"Square_nearbys--2__AyuRe","nearbys--3":"Square_nearbys--3__y_IXO","nearbys--4":"Square_nearbys--4__297eu","nearbys--5":"Square_nearbys--5__n-yGU","nearbys--6":"Square_nearbys--6__3Cc6G","nearbys--7":"Square_nearbys--7__2TQc2","nearbys--8":"Square_nearbys--8__3TuG9",firstAnt:"Square_firstAnt__2p3BC"}},function(e,t,n){e.exports={bg__footer:"Footer_bg__footer__1Ec9g",startButton:"Footer_startButton__3c_D7",gameWindowButton:"Footer_gameWindowButton__161nZ"}},,function(e,t,n){e.exports={tooltip:"About_tooltip__11UOO","--emailCopied":"About_--emailCopied__1sOyL",tooltip__text:"About_tooltip__text__38Jol"}},function(e,t,n){e.exports={window:"Window_window__2b0FV","window--minimizing":"Window_window--minimizing__BFh_I",minimize:"Window_minimize__2n5Ja","window--maximizing":"Window_window--maximizing__1nHfA","window--minimized":"Window_window--minimized__1UDuv",maximize:"Window_maximize__3DVgN"}},,function(e,t,n){e.exports={overlay:"Overlay_overlay__3V6Nm",overlay_hide:"Overlay_overlay_hide__3172W"}},,function(e,t,n){e.exports={externalLink__outer:"ExternalLinkIcon_externalLink__outer__MLKkd",externalLink__inner:"ExternalLinkIcon_externalLink__inner__oaE9z"}},function(e,t,n){e.exports={gameWrapper:"Board_gameWrapper__1GUZw",boardWrapper:"Board_boardWrapper__2nasP"}},function(e,t,n){},,,function(e,t,n){e.exports={optionsBar:"OptionsBar_optionsBar__15dYm"}},function(e,t,n){e.exports={faceButton:"FaceButton_faceButton__2SmbD"}},function(e,t,n){e.exports={controls:"Controls_controls__3MjnT"}},function(e,t,n){e.exports={board_row:"RowWrapper_board_row__1tOdI"}},function(e,t,n){e.exports={window_container:"App_window_container__1hSHD"}},,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),o=n.n(c),i=(n(33),n(34),n(21),n(3)),s=n(2),l=function(e,t){switch(t.type){case"BOARD_SET":return console.log("ROUND REDUCER board set"),Object(s.a)(Object(s.a)({},e),{},{ready:!0,started:!1});case"START_ROUND":return console.log("ROUND REDUCER start round"),Object(s.a)(Object(s.a)({},e),{},{started:!0});case"WON":case"LOST":return console.log("ROUND REDUCER won/lost"),Object(s.a)(Object(s.a)({},e),{},{ready:!1});case"RESET":return console.log("ROUND REDUCER reset"),Object(s.a)({},t.payload);default:return Object(s.a)({},e)}},u={ready:!1,started:!1},d=n(0),b={ready:null,started:null,set:{ready:function(){},start:function(){},lost:function(){},won:function(){},reset:function(){}}},f=r.a.createContext(b),j=f,_=function(e){var t=Object(a.useReducer)(l,u),n=Object(i.a)(t,2),r=n[0],c=n[1],o={ready:function(){c({type:"BOARD_SET"})},start:function(){c({type:"START_ROUND"})},lost:function(){c({type:"LOST"})},won:function(){c({type:"WON"})},reset:function(){c({type:"RESET",payload:Object(s.a)({},u)})}};return Object(d.jsx)(f.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{set:o}),children:e.children})},p={beginner:{rows:8,cols:8,ants:10,level:"beginner"},intermediate:{rows:16,cols:16,ants:40,level:"intermediate"},expert:{rows:24,cols:24,ants:99,level:"expert"}},O={rows:null,cols:null,ants:null,setParameters:function(e){}},m=r.a.createContext(O),g=m,h=function(e){var t=Object(a.useState)(p.beginner),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(d.jsx)(m.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{setParameters:function(e){c(e),console.log("PARAMS CONTEXT changing params")}}),children:e.children})},x={click:{last:null,current:null,set:function(e){}},key:{last:null,current:null,set:function(e){}}},y=r.a.createContext(x),v=y,w=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(null),s=Object(i.a)(o,2),l=s[0],u=s[1],b=Object(a.useState)(null),f=Object(i.a)(b,2),j=f[0],_=f[1],p=Object(a.useState)(null),O=Object(i.a)(p,2),m=O[0],g=O[1],h=Object(a.useCallback)((function(e){c(l),u(e)}),[l]),x=Object(a.useCallback)((function(e){_(m),g(e)}),[m]);return Object(d.jsx)(y.Provider,{value:{click:{last:r,current:l,set:h},key:{last:j,current:m,set:x}},children:e.children})},C=function(){var e=Object(a.useState)({x:0,y:0}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],u=function(){l(!1)};return{isDragging:s,grab:function(){l(!0)},drag:function(e){if(s){e.clientY>20&&e.clientX>20&&e.clientX<e.view.innerWidth-20?r((function(t){return{x:t.x+e.movementX,y:t.y+e.movementY}})):(r({x:0,y:0}),u())}},drop:u,translate:n}},S={overlay:{display:null,modalContent:null,hide:function(){},show:function(){},modal:function(e){}},dragMove:{translate:{x:null,y:null},isDragging:null,grab:function(){},drag:function(e){},drop:function(){}},minimize:{isMinimized:null,down:function(){},up:function(){}}},D=r.a.createContext(S),E=D,k=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(null),s=Object(i.a)(o,2),l=s[0],u=s[1],b=function(){r||c(!0)},f=Object(a.useState)(!1),j=Object(i.a)(f,2),p=j[0],O=j[1],m=C();return Object(d.jsx)(D.Provider,{value:{overlay:{display:r,modalContent:l,hide:function(){r&&c(!1),l&&u(null)},show:b,modal:function(e,t){u({title:e,content:t}),r||b()}},dragMove:m,minimize:{isMinimized:p,down:function(){O(!0)},up:function(){O(!1)}}},children:Object(d.jsx)(h,{children:Object(d.jsx)(_,{children:Object(d.jsx)(w,{children:e.children})})})})},B=n(17),R=n.n(B),A=n(6),N=function(){var e=Object(a.useRef)(),t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(-1),s=Object(i.a)(o,2),l=s[0],u=s[1],d=Object(a.useCallback)((function(){var e=l;l+1===r.length?e=0:e+=1,r[e].focus(),u(e)}),[r,l]),b=Object(a.useCallback)((function(){var e=l;l-1<0?e=r.length-1:e-=1,r[e].focus(),u(e)}),[r,l]);return Object(a.useEffect)((function(){e.current&&c([e.current].concat(Object(A.a)(e.current.querySelectorAll("a, button, textarea, input, select, .focusable"))))}),[e]),{ref:e,next:d,previous:b}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;a.key===e.trim()&&(console.log("".concat(a.key," detected!")),n&&a.shiftKey&&n(),t&&!a.shiftKey&&t(),a.preventDefault())},q=n(8),z=n.n(q),M=n(5),U=n.n(M),W=function(e){var t=C(),n=t.isDragging?"grabbing":"grab",a=N();return Object(d.jsxs)("article",{ref:a.ref,className:"focusable ".concat(z.a.modal),style:{transform:"translateX(".concat(t.translate.x,"px) translateY(").concat(t.translate.y,"px)")},onKeyDown:function(t){T("Escape",e.dismiss,null,t),T("Tab",a.next,a.previous,t)},tabIndex:0,children:[Object(d.jsxs)("nav",{className:U.a.titleBar,onPointerDown:t.grab,onPointerUp:t.drop,onPointerOut:t.drop,onPointerMove:t.drag,onMouseOver:null,style:{cursor:n},children:[Object(d.jsx)("span",{className:U.a.titleBar__left,children:Object(d.jsx)("h1",{id:z.a.modal__title,children:e.title})}),Object(d.jsx)("span",{className:U.a.titleBar__right,children:Object(d.jsx)("button",{onClick:e.dismiss,children:"\u2716"})})]}),Object(d.jsx)("section",{className:z.a.modal__contentWrapper,children:Object(d.jsx)("div",{className:z.a.modal__text,children:e.children})}),Object(d.jsx)("section",{className:z.a.modal__buttonWrapper,children:Object(d.jsx)("button",{className:z.a.modal__button,onClick:e.dismiss,children:Object(d.jsx)("span",{children:"OK"})})})]})},I=function(){var e=Object(a.useContext)(E),t=null;return e.overlay.modalContent&&(t=Object(d.jsx)(W,{dismiss:function(){e.overlay.hide()},title:e.overlay.modalContent.title,children:e.overlay.modalContent.content})),Object(d.jsx)("div",{className:e.overlay.display?R.a.overlay:R.a.overlay_hide,children:e.overlay.modalContent?t:null})},P={unclicked:"",clicked:"",ant:["0xD83D","0xDC1C"],flag:["0xD83D","0xDEA9"]},L={sleeping:["0xD83D","0xDE34"],smiling:["0xD83D","0xDE0A"],yelling:["0xD83D","0xDE31"],upsideDown:["0xD83D","0xDE43"],exploded:["0xD83E","0xDD2F"],shades:["0xD83D","0xDE0E"],xEyes:["0xD83D","0xDE35"],sweating:["0xD83D","0xDE13"],winking:["0xD83D","0xDE09"]},F=function(){var e=Object(a.useContext)(E),t=e.dragMove.isDragging?"grabbing":"grab";return Object(d.jsxs)("section",{className:"".concat(U.a.titleBar," ").concat(e.overlay.display?U.a["titleBar--inactive"]:""),onPointerDown:e.dragMove.grab,onPointerUp:e.dragMove.drop,onPointerOut:e.dragMove.drop,onPointerMove:e.dragMove.drag,onMouseOver:null,style:{cursor:t},children:[Object(d.jsxs)("span",{className:U.a.titleBar__left,children:[String.fromCharCode.apply(String,Object(A.a)(P.ant)),Object(d.jsx)("h1",{children:"Antsweeper"})]}),Object(d.jsxs)("span",{className:U.a.titleBar__right,children:[Object(d.jsx)("button",{className:U.a["--minimize"],onClick:e.minimize.down,children:"_"}),Object(d.jsx)("button",{disabled:!0,className:"button--focus",children:"\u2716"})]})]})},G=n(4),K=n.n(G),X=n(18),H=n.n(X),V=n(23),Y=function(){var e=Object(a.useState)({beginner:[],intermediate:[],advanced:[]}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=function(e){return Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)("h3",{children:"".concat(e[0].toUpperCase()).concat(e.slice(1))})}),n[e].length?n[e].map((function(e){return Object(d.jsxs)("li",{children:[e.name,": ",e.score]},e.id)})):Object(d.jsx)("li",{children:"No high scores yet for this level!"})]})};return Object(a.useEffect)((function(){(function(){var e=Object(V.a)(H.a.mark((function e(){var t,n,a,c,o,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fir-bee8d.firebaseio.com/antsweeper.json");case 2:return t=e.sent,e.next=5,t.json();case 5:for(c in n=e.sent,a={beginner:[],intermediate:[],advanced:[]},n)try{a[n[c].level].push({id:c,name:n[c].name,score:n[c].score})}catch(s){console.log(n[c]),console.log(s)}for(i in o={},a)o[i]=a[i].sort((function(e,t){return e.score>t.score}));r(o);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)("aside",{children:[Object(d.jsx)("h2",{children:"Best Times"}),c("beginner"),c("intermediate"),c("advanced")]})},J=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(j),n=Object(a.useContext)(E);return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("ul",{className:K.a.dropdown__section,children:Object(d.jsx)("li",{onClick:function(){t.set.reset()},"aria-label":"New Game",children:"New Game"})}),Object(d.jsx)("ul",{className:K.a.dropdown__section,children:["beginner","intermediate","expert"].map((function(t){return Object(d.jsx)("li",{onClick:function(){return function(t){e.setParameters(p[t])}(t)},className:e.level===t?K.a["--selected"]:null,"aria-label":t.charAt(0).toUpperCase()+t.slice(1),children:t.charAt(0).toUpperCase()+t.slice(1)},"level-".concat(t))}))}),Object(d.jsx)("ul",{className:K.a.dropdown__section,children:Object(d.jsxs)("li",{className:" ".concat(K.a["--secondaryLetter"]),onClick:function(){n.overlay.modal("Best Times",Object(d.jsx)(Y,{}))},"aria-label":"Best Times",children:["Best ",Object(d.jsx)("span",{children:"T"}),"imes..."]})})]})},Z=n(14),Q=n.n(Z),$=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=function(){navigator.clipboard.writeText("erinruthmaness@gmail.com"),r(!0)};return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("h2",{children:"Welcome To Antsweeper!"}),Object(d.jsx)("p",{children:"This game recreates the old Windows Minesweeper game (but with ants - I garden a lot) using React and some concepts introduced by React hooks. I love reverse-engineering games and ideas using JavaScript, and I also love Minesweeper, so this was bound to happen eventually."}),Object(d.jsx)("p",{children:"I've been working on this project casually in my free time as I study my way back through React hooks, so it may be missing features when you see it."}),Object(d.jsxs)("p",{children:["I'm currently looking for a job! Click",Object(d.jsx)("strong",{children:Object(d.jsxs)("span",{className:"".concat(Q.a.tooltip," ").concat(n?Q.a["--emailCopied"]:"focusable "),onClick:c,onKeyPress:function(e){T("Enter",c,null,e)},tabIndex:0,children:["here",Object(d.jsx)("span",{className:Q.a.tooltip__text,children:n?"Thank you!":"Click to copy my email address"})]})}),"to copy my email address."]})]})},ee=n(19),te=n.n(ee),ne=function(){return Object(d.jsx)("span",{className:te.a.externalLink__outer,children:Object(d.jsx)("div",{className:te.a.externalLink__inner})})},ae=function(){var e=Object(a.useContext)(E);return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("ul",{className:K.a.dropdown__section,children:Object(d.jsx)("a",{href:"https://github.com/erinruthmaness/antsweeper",children:Object(d.jsx)("li",{children:"Contents"})})}),Object(d.jsxs)("ul",{className:K.a.dropdown__section,children:[Object(d.jsx)("li",{onClick:function(){e.overlay.modal("About Antsweeper",Object(d.jsx)($,{}))},"aria-label":"What is Antsweeper?",children:"What is Antsweeper?"}),Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",href:"http://www.minesweeper.info/wiki/Windows_Minesweeper",children:Object(d.jsxs)("li",{"aria-label":"About Minesweeper (opens in new window)",children:["About Minesweeper... ",Object(d.jsx)(ne,{})]})})]})]})},re=function(e){return Object(d.jsxs)("aside",{className:K.a.dropdown,children:["Game"===e.which?Object(d.jsx)(J,{}):null,"Help"===e.which?Object(d.jsx)(ae,{}):null]})},ce=n(10),oe=n.n(ce),ie=function(e){var t=Object(a.useContext)(v),n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1],f=Object(a.useCallback)((function(){c||o(!0)}),[c]),j=Object(a.useCallback)((function(){c&&(o(!1),b(!1))}),[c]);return Object(a.useEffect)((function(){var e=setTimeout((function(){c&&b(!0)}),500);return function(){return clearTimeout(e)}}),[c]),Object(a.useEffect)((function(){if(u&&t.click.current){if(t.click.current.target.id===e.buttonText+"-optionButton")return;c&&j()}}),[t.click,c,u,j,e.buttonText]),Object(d.jsxs)("div",{className:oe.a.optionButton__wrapper,children:[Object(d.jsx)("button",{id:e.buttonText+"-optionButton",className:c?"".concat(oe.a.optionButton," ").concat(oe.a["optionButton--clicked"]):oe.a.optionButton,onClick:function(e){c?j():f()},children:e.buttonText}),c?Object(d.jsx)(re,{which:e.buttonText}):null]})},se=n(24),le=n.n(se),ue=function(){return Object(d.jsxs)("nav",{className:le.a.optionsBar,children:[Object(d.jsx)(ie,{buttonText:"Game"}),Object(d.jsx)(ie,{buttonText:"Help"})]})},de=function(){return Object(d.jsxs)("header",{children:[Object(d.jsx)(F,{}),Object(d.jsx)(ue,{})]})},be=function(e,t){switch(t.type){case"RESET_BOARD":return console.log("BOARD REDUCER reset board"),Object(s.a)({},t.payload);case"CLEAR_BOARD":return console.log("BOARD REDUCER clear board"),Object(s.a)(Object(s.a)({},e),{},{board:[]});case"UNCOVER_BOARD":return console.log("BOARD REDUCER uncover board"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:L.smiling});case"SET_ANTS":return console.log("BOARD REDUCER set ants"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:L.smiling});case"UPDATE_BOARD":return console.log("BOARD REDUCER update board"),Object(s.a)(Object(s.a)({},e),t.payload);case"SET_FACE":return console.log("BOARD REDUCER set face"),Object(s.a)(Object(s.a)({},e),{},{face:t.payload});default:return Object(s.a)({},e)}},fe=function(e){return{board:[],level:e.level,parameters:{rows:e.rows,cols:e.cols,ants:e.ants,antList:[]},flags:0,face:L.sleeping}},je=n(25),_e=n.n(je),pe=function(e){return Object(d.jsx)("button",{className:_e.a.faceButton,onClick:e.onClick,children:String.fromCharCode(e.face[0],e.face[1])})},Oe=function(e,t){return e+"--"+t.toString()},me=n(7),ge=n.n(me),he=function(e){var t=e.display.toString().padStart(3,"0").split("");return t&&"off"!==t||(t=["8","8","8"]),Object(d.jsx)("section",{className:ge.a.calcScreen,id:e.id,children:t.map((function(t,n){return Object(d.jsxs)("div",{className:"".concat(ge.a.digit," ").concat(ge.a[Oe("digit",t)]),children:[Object(d.jsx)("div",{className:"".concat(ge.a.digit__top," ").concat(ge.a.digit__half)}),Object(d.jsx)("div",{className:"".concat(ge.a.digit__bottom," ").concat(ge.a.digit__half)})]},"".concat(e.id,"-digit-").concat(n))}))})},xe=n(26),ye=n.n(xe),ve=function(e){var t=Object(a.useState)("off"),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(e.firstClick),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){return e.firstClick&&!l&&u(!0),!e.firstClick&&l&&u(!1),function(){}}),[e.firstClick,l]),Object(a.useEffect)((function(){var t;return l&&e.inProgress&&e.firstClick&&(t=setInterval((function(){r<999&&c((function(e){return e+1}))}),1e3)),e.inProgress||clearInterval(t),function(){clearInterval(t)}}),[r,l,e.firstClick,e.inProgress]),Object(d.jsxs)("section",{className:ye.a.controls,children:[Object(d.jsx)(he,{id:"flags",display:e.inProgress||l?e.flags:"off"}),Object(d.jsx)(pe,{onClick:function(){c(0),e.startGame()},face:e.face}),Object(d.jsx)(he,{id:"timer",display:e.inProgress||l?r:"off"})]})},we={squareResponse:function(e,t){return{which:e,face:t}},touchStart:function(e){return e?we.squareResponse("touchStart",L.winking):we.squareResponse("touchStart",L.yelling)},touchEnd:function(e){return console.log("touch end count is "+e),e>0?we.squareResponse("right",L.smiling):we.squareResponse("left",L.smiling)},mouseDown:function(e,t){return 1===e?t.flagged?we.squareResponse("left",L.winking):we.squareResponse("left",L.yelling):t.flagged?we.squareResponse("right",L.sweating):we.squareResponse("right",L.smiling)}},Ce=n(11),Se=n.n(Ce),De=!1,Ee="left",ke=!1,Be=0;var Re=function(e){var t=Object(a.useRef)(),n=function(){De=!1,Ee="left",ke=!1,Be=0},r=function(t,a){if(e.gameOver)n();else if(!(ke||e.sq.revealed||e.sq.flagged&&1===t.nativeEvent.which))if("down"===a){De=!0;var r=we.mouseDown(t.nativeEvent.which,e);Ee=r.which,e.changeFace(r.face)}else"up"===a&&(ke||o(Ee))},c=function(a){if(e.gameOver)n();else if(!(e.gameOver||De||e.sq.revealed))if("start"===a)ke=!0,e.changeFace(we.touchStart(e.sq.flagged).face),t.current=setInterval((function(){Be++}),800);else if("end"===a){clearInterval(t.current);var r=we.touchEnd(Be);if(e.sq.flagged&&"left"===r.which)return void e.changeFace(r.face);o(r.which)}},o=function(t){Ee="left",Be=0,e.onClick(e.sq.y,e.sq.x,t.toUpperCase()+"_CLICK")};return Object(d.jsx)("button",{className:"\n        ".concat(Se.a.square,"\n        ").concat(e.sq.revealed&&Se.a["square--clicked"]," \n        ").concat(Se.a[Oe("nearbys",e.sq.nearbyAnts)],"\n        ").concat(e.sq.revealed&&e.sq.ant&&!e.sq.unclickedAnt?Se.a.firstAnt:null," \n      "),onMouseDown:function(e){return r(e,"down")},onMouseUp:ke?void 0:function(e){return r(e,"up")},onTouchStart:function(){return c("start")},onTouchEnd:De?void 0:function(){return c("end")},onContextMenu:function(e){return e.preventDefault()},children:Array.isArray(e.sq.display)?String.fromCharCode(e.sq.display[0],e.sq.display[1]):e.sq.display})},Ae=n(27),Ne=n.n(Ae),Te=function(e){return e.boardGrid.map((function(t,n){return Object(d.jsx)("div",{className:Ne.a.board_row,children:t.map((function(t){return Object(d.jsx)(Re,{id:t.key,sq:t,onClick:e.handleSquareClick,changeFace:e.setFace,gameOver:!e.gameInProgress},t.key)}))},"row-".concat(n))}))},qe=function(e,t){return{key:"cell-x"+e+"-y"+t,x:e,y:t,ant:!1,revealed:!1,display:P.unclicked,flagged:!1,nearbyAnts:0,neighbors:[]}},ze=function(e,t){return Array.from(Array(e),(function(e,n){return Array.from(Array(t),(function(e,t){return qe(t,n)}))}))},Me=function(e,t){for(var n=Array.from(Array(e),(function(e,t){return{id:t+1,ant:!1}})),a=0;a<t;a++)n[a].ant=!0;return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n)},Ue=function(e){var t=e.parameters.rows*e.parameters.cols,n=Me(t,e.parameters.ants),a=t-1,r=[];return e.board.forEach((function(e){e.forEach((function(e){e.ant=n[a].ant,a--,e.ant&&r.push(e.key)}))})),[e.board,r]},We=function(e,t){var n=!1;return t.forEach((function(t){null!==t&&e.some((function(e){return e===t.key}))&&(n=!0)})),n},Ie=function(e,t){return[t-1>=0?e[t-1]:null,e[t],t+1<e.length?e[t+1]:null]},Pe=function(e,t,n){var a=t-1>=0?Ie(e[t-1],n):[null,null,null],r=Ie(e[t],n),c=t+1<e.length?Ie(e[t+1],n):[null,null,null];return a.concat(r,c)},Le=function(e,t,n){return function(e,t){var n,a=e.board,r=[];do{var c=Ue(e),o=Object(i.a)(c,2);a=o[0],r=o[1]}while(We(r,t));return[(n=a,n.forEach((function(e,t){e.forEach((function(e,a){var r=0,c=Pe(n,t,a);c.forEach((function(e){e&&e.ant&&r++})),e.nearbyAnts=r,e.neighbors=c.filter((function(e){return null!==e}))}))})),n),r]}(e,Pe(e.board,t,n))},Fe={won:function(){console.log("yeah")},lost:function(){console.log("oh no")}},Ge=function e(t,n){return t.neighbors.forEach((function(t){n[t.y][t.x].revealed||(n[t.y][t.x]=Object(s.a)(Object(s.a)({},t),{},{revealed:!0,display:0===t.nearbyAnts?"":t.nearbyAnts}),0===t.nearbyAnts&&(n=e(t,n)))})),n},Ke=function(e,t){var n=t;return e.neighbors.forEach((function(e){t[e.y][e.x].revealed||(t[e.y][e.x]=Object(s.a)(Object(s.a)({},e),{},{revealed:!0,display:0===e.nearbyAnts?"":e.nearbyAnts}),0===e.nearbyAnts&&(t=Ge(e,t)))})),n},Xe=function(e,t){console.log("new square:"),console.log(t);var n=Object(A.a)(e);return n[t.y][t.x]=t,Object(A.a)(n)},He=function(e,t){switch(console.log(t),t.type){case"LEFT_CLICK":if(t.payload.flagged||t.payload.revealed)return{newBoardState:Object(s.a)(Object(s.a)({},e),{},{face:L.smiling}),gameOver:!1};if(t.payload.ant){var n=Xe(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.ant,revealed:!0}));return{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:(o=n,i=e.parameters.antList,o.forEach((function(e,t){o.forEach((function(e,n){-1===i.indexOf(o[t][n].key)||o[t][n].revealed||o[t][n].flagged||(o[t][n]=Object(s.a)(Object(s.a)({},o[t][n]),{},{display:P.ant,revealed:!0,unclickedAnt:!0}))}))})),o),face:L.exploded}),gameOver:!0}}var a=L.smiling,r=!1,c=Xe(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:0===t.payload.nearbyAnts?"":t.payload.nearbyAnts,revealed:!0}));return function(e,t){var n=t.rows*t.cols-t.ants;return e.forEach((function(t,a){e.forEach((function(t,r){!e[a][r].ant&&e[a][r].revealed&&n--}))})),0===n}(e.board,e.parameters)&&(a=L.shades,r=!0),0===t.payload.nearbyAnts&&(c=Ke(t.payload,c)),{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:c,face:a}),gameOver:r};case"RIGHT_CLICK":return t.payload.flagged?{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:Xe(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.unclicked,revealed:!1,flagged:!1})),face:L.smiling,flags:e.flags+1}),gameOver:!1}:e.flags>0?{newBoardState:Object(s.a)(Object(s.a)({},e),{},{board:Xe(e.board,Object(s.a)(Object(s.a)({},t.payload),{},{display:P.flag,revealed:!1,flagged:!0})),face:L.smiling,flags:e.flags-1}),gameOver:!1}:{newBoardState:Object(s.a)(Object(s.a)({},e),{},{face:L.smiling}),gameOver:!1};default:return void console.log("squareClick reducer error: ",t.type)}var o,i},Ve=n(20),Ye=n.n(Ve),Je=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(j),n=Object(a.useReducer)(be,fe(e)),r=Object(i.a)(n,2),c=r[0],o=r[1],l=Object(a.useCallback)((function(){o({type:"RESET_BOARD",payload:fe(e)}),t.set.reset()}),[e,t.set]),u=Object(a.useCallback)((function(e,n,a){if(!t.started){var r=Le(c,e,n),l=Object(i.a)(r,2),u=l[0],d=l[1];console.log(u),o({type:"SET_ANTS",payload:{board:u,parameters:Object(s.a)(Object(s.a)({},c.parameters),{},{antList:d})}}),t.set.start()}console.log(c.board[e][n]);var b=He(Object(s.a)({},c),{type:a,payload:c.board[e][n]}),f=b.newBoardState,j=b.gameOver;j&&f.face===L.exploded?(t.set.lost(),Fe.lost()):j&&f.face===L.shades&&(t.set.won(),Fe.won()),o({type:"UPDATE_BOARD",payload:{board:f.board,face:f.face,flags:f.flags}})}),[c,t]);return Object(a.useEffect)((function(){(e.level!==c.level||!t.ready&&!t.started&&c.board.length>0)&&l()}),[e.level,c.level,c.board,t,l]),Object(d.jsxs)("article",{className:Ye.a.gameWrapper,children:[Object(d.jsx)(ve,{startGame:function(){t.started&&l(),o({type:"CLEAR_BOARD"}),o({type:"UNCOVER_BOARD",payload:{board:ze(c.parameters.rows,c.parameters.cols),parameters:Object(s.a)({},c.parameters),flags:c.parameters.ants}}),t.set.ready()},inProgress:t.ready,face:c.face,flags:c.flags,firstClick:t.started}),Object(d.jsx)("section",{className:Ye.a.boardWrapper,children:c.board?Object(d.jsx)(Te,{boardGrid:c.board,handleSquareClick:u,setFace:function(e){o({type:"SET_FACE",payload:e})},gameInProgress:t.ready}):null})]})},Ze=n(15),Qe=n.n(Ze),$e=function(){var e=Object(a.useContext)(E),t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],b=Object(a.useState)(!1),f=Object(i.a)(b,2),j=f[0],_=f[1];return Object(a.useCallback)((function(){console.log("window usecallback"),e.minimize.isMinimized&&!l&&c("window--minimizing"),e.minimize.isMinimized||j||c("window--maximizing")}),[e.minimize.isMinimized,l,j]),Object(d.jsx)("main",{className:"focusable ".concat(Qe.a.window," ").concat(r?Qe.a[r]:""," ").concat(e.minimize.isMinimized?Qe.a["window--minimized"]:""),tabIndex:0,style:{transform:e.minimize.isMinimized?"none":"translateX(".concat(e.dragMove.translate.x,"px) translateY(").concat(e.dragMove.translate.y,"px)")},onAnimationEnd:function(){console.log("animation ended"),"window--minimizing"===r?(c(""),u(!0),_(!1)):"window--maximizing"===r&&(c(""),_(!0),u(!1))},onAnimationStart:function(){console.log("animation started")},children:e.minimize.isMinimized?null:Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(de,{}),Object(d.jsx)(Je,{})]})})},et=n.p+"static/media/win98Logo.c4af9ed5.png",tt=n(12),nt=n.n(tt),at=function(){var e=Object(a.useContext)(E),t=nt.a.gameWindowButton;e.minimize.isMinimized||(t="".concat(nt.a.gameWindowButton," button--focus"));return Object(d.jsxs)("footer",{className:nt.a.bg__footer,children:[Object(d.jsxs)("button",{id:"windows_start",className:nt.a.startButton,children:[Object(d.jsx)("img",{src:et,alt:"Windows 98 Logo"})," Start"]}),Object(d.jsxs)("button",{id:"antsweeper_min",className:t,onClick:function(){e.minimize.isMinimized?e.minimize.up():e.minimize.down()},children:[String.fromCharCode.apply(String,Object(A.a)(P.ant))," Antsweeper"]})]})},rt=n(28),ct=n.n(rt);var ot=function(){var e=Object(a.useContext)(g),t=Object(a.useContext)(v);return Object(a.useEffect)((function(){document.addEventListener("click",t.click.set),document.addEventListener("keypress",t.key.set)}),[t]),Object(d.jsxs)("div",{className:"".concat(e.level," ").concat(ct.a.window_container),children:[Object(d.jsx)($e,{}),Object(d.jsx)(at,{})]})};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(k,{children:Object(d.jsx)(ot,{})})}),document.getElementById("root"))}],[[37,1,2]]]);
//# sourceMappingURL=main.97c10009.chunk.js.map