(this.webpackJsonpantsweeper=this.webpackJsonpantsweeper||[]).push([[0],[,,,,function(e,t,n){e.exports={calcScreen:"CalcScreen_calcScreen__2RNgm",digit:"CalcScreen_digit__n2xbQ",digit__half:"CalcScreen_digit__half___C2KC","digit--0":"CalcScreen_digit--0__JQ9uK",digit__top:"CalcScreen_digit__top__2_eJh",digit__bottom:"CalcScreen_digit__bottom__3IQMY","digit--4":"CalcScreen_digit--4__1fpXy","digit--1":"CalcScreen_digit--1__WyxL7","digit--7":"CalcScreen_digit--7__q3bg6","digit--2":"CalcScreen_digit--2__2OATq","digit--5":"CalcScreen_digit--5__2ktkl","digit--3":"CalcScreen_digit--3__1jH8p","digit--9":"CalcScreen_digit--9__23oWL","digit--6":"CalcScreen_digit--6__9FBRb"}},,function(e,t,n){e.exports={dropdown:"OptionDropdown_dropdown__hQBMN","dropdown--open":"OptionDropdown_dropdown--open__nGfXv",slideup:"OptionDropdown_slideup__3q_9-",dropdown__section:"OptionDropdown_dropdown__section__LXyCN",delayRender:"OptionDropdown_delayRender__3X5H-","--selected":"OptionDropdown_--selected__3WX4l"}},,function(e,t,n){e.exports={square:"Square_square__3umfu","square--clicked":"Square_square--clicked__2AQ4_","nearbys--0":"Square_nearbys--0__32GBT","nearbys--1":"Square_nearbys--1__Q9Cf5","nearbys--2":"Square_nearbys--2__10nNw","nearbys--3":"Square_nearbys--3__1YeYu","nearbys--4":"Square_nearbys--4__3Cr8k","nearbys--5":"Square_nearbys--5__3VFN5","nearbys--6":"Square_nearbys--6__25uFq","nearbys--7":"Square_nearbys--7__3V4t-","nearbys--8":"Square_nearbys--8__2NMV7",firstAnt:"Square_firstAnt__1BtMt"}},,function(e,t,n){e.exports={titleBar:"TitleBar_titleBar__3D0NT",titleBar__left:"TitleBar_titleBar__left__2jmEm",titleBar__right:"TitleBar_titleBar__right__2I_bt"}},function(e,t,n){e.exports={optionButton__wrapper:"OptionWrapper_optionButton__wrapper__1Gk2U",optionButton:"OptionWrapper_optionButton__5Jvpo","optionButton--clicked":"OptionWrapper_optionButton--clicked__2AX5d"}},function(e,t,n){e.exports={bg__footer:"Footer_bg__footer__3cwNj",startButton:"Footer_startButton__JcZ0O",gamewindowButton:"Footer_gamewindowButton__31l6n"}},,function(e,t,n){e.exports={overlay:"Overlay_overlay__y-1vO",overlay_hide:"Overlay_overlay_hide__3nis0"}},function(e,t,n){e.exports={gameWrapper:"Board_gameWrapper__tDsXr",boardWrapper:"Board_boardWrapper__3qA6v"}},function(e,t,n){},,function(e,t,n){e.exports={optionsBar:"OptionsBar_optionsBar__3psrx"}},function(e,t,n){e.exports={faceButton:"FaceButton_faceButton__-uowv"}},function(e,t,n){e.exports={controls:"Controls_controls__3f1Rx"}},function(e,t,n){e.exports={board_row:"RowWrapper_board_row__2Yugp"}},function(e,t,n){e.exports={window:"Window_window__2bDq7"}},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(17),o=n.n(c),s=(n(27),n(28),n(16),n(1)),i=n(3),l={beginner:{rows:8,cols:8,ants:10,level:"beginner"},intermediate:{rows:16,cols:16,ants:40,level:"intermediate"},expert:{rows:24,cols:24,ants:99,level:"expert"}},u=function(e,t){switch(t.type){case"BOARD_SET":return console.log("ROUND REDUCER board set"),Object(s.a)(Object(s.a)({},e),{},{ready:!0,started:!1});case"START_ROUND":return console.log("ROUND REDUCER start round"),Object(s.a)(Object(s.a)({},e),{},{started:!0});case"WON":case"LOST":return console.log("ROUND REDUCER won/last"),Object(s.a)(Object(s.a)({},e),{},{ready:!1});case"RESET":return console.log("ROUND REDUCER reset"),Object(s.a)({},t.payload);default:return Object(s.a)({},e)}},d={ready:!1,started:!1},f=n(0),b={ready:null,started:null,set:{ready:function(){},start:function(){},lost:function(){},won:function(){},reset:function(){}}},_=r.a.createContext(b),p=_,j=function(e){var t=Object(a.useReducer)(u,d),n=Object(i.a)(t,2),r=n[0],c=n[1],o={ready:function(){c({type:"BOARD_SET"})},start:function(){c({type:"START_ROUND"})},lost:function(){c({type:"LOST"})},won:function(){c({type:"WON"})},reset:function(){c({type:"RESET",payload:Object(s.a)({},d)})}};return Object(f.jsx)(_.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{set:o}),children:e.children})},O={display:null,hide:function(){},show:function(){}},g=r.a.createContext(O),h=g,y=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(f.jsx)(g.Provider,{value:{display:r,hide:function(){c(!1),console.log("OVERLAY CONTEXT hiding overlay")},show:function(){c(!0),console.log("OVERLAY CONTEXT showing overlay")}},children:e.children})},x={rows:null,cols:null,ants:null,setParameters:function(e){}},m=r.a.createContext(x),v=m,w=function(e){var t=Object(a.useState)(l.beginner),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(f.jsx)(m.Provider,{value:Object(s.a)(Object(s.a)({},r),{},{setParameters:function(e){c(e),console.log("PARAMS CONTEXT changing params")}}),children:Object(f.jsx)(j,{children:Object(f.jsx)(y,{children:e.children})})})},C=n(14),E=n.n(C),D=function(){var e=Object(a.useContext)(h);return Object(f.jsx)("div",{className:e.display?E.a.overlay:E.a.overlay_hide,onClick:function(){e.hide()}})},R=n(5),S={unclicked:"",clicked:"",ant:["0xD83D","0xDC1C"],flag:["0xD83D","0xDEA9"]},q={sleeping:["0xD83D","0xDE34"],smiling:["0xD83D","0xDE0A"],yelling:["0xD83D","0xDE31"],upsideDown:["0xD83D","0xDE43"],exploded:["0xD83E","0xDD2F"],shades:["0xD83D","0xDE0E"],xEyes:["0xD83D","0xDE35"],sweating:["0xD83D","0xDE13"],winking:["0xD83D","0xDE09"]},A=n(10),B=n.n(A),k=function(){return Object(f.jsxs)("section",{className:B.a.titleBar,children:[Object(f.jsxs)("span",{className:B.a.titleBar__left,children:[String.fromCharCode.apply(String,Object(R.a)(S.ant)),Object(f.jsx)("h1",{children:"Antsweeper"})]}),Object(f.jsxs)("span",{className:B.a.titleBar__right,children:[Object(f.jsx)("button",{children:"\u0332"}),Object(f.jsx)("button",{children:"\u2716"})]})]})},N=n(6),T=n.n(N),U=function(e){var t=Object(a.useContext)(v),n=Object(a.useContext)(p),r=Object(a.useContext)(h);return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)("ul",{className:T.a.dropdown__section,children:Object(f.jsx)("li",{onClick:function(){r.hide(),n.set.reset()},children:"New Game"})}),Object(f.jsx)("ul",{className:T.a.dropdown__section,children:["beginner","intermediate","expert"].map((function(e){return Object(f.jsx)("li",{onClick:function(){return function(e){r.hide(),t.setParameters(l[e])}(e)},className:t.level===e?T.a["--selected"]:null,children:e.charAt(0).toUpperCase()+e.slice(1)},"level-".concat(e))}))})]})},F=function(e){return Object(f.jsxs)("aside",{className:T.a.dropdown,children:["Game"===e.which?Object(f.jsx)(U,{}):null,(e.which,null)]})},P=n(11),W=n.n(P),L=function(e){var t="".concat(W.a.optionButton);return e.dropdown&&(t+=" ".concat(W.a["optionButton--clicked"])),Object(f.jsxs)("div",{className:W.a.optionButton__wrapper,children:[Object(f.jsx)("button",{className:t,onClick:e.handleClick,children:e.buttonText}),e.dropdown?Object(f.jsx)(F,{which:e.buttonText}):null]})},M=n(18),G=n.n(M),I=function(){var e=Object(a.useContext)(h),t=Object(a.useState)({game:!1,help:!1}),n=Object(i.a)(t,2),r=n[0],c=n[1],o=function(){c({game:!0,help:!1})},s=function(){c({game:!1,help:!0})},l=function(){c({game:!1,help:!1})};return Object(a.useEffect)((function(){e.display||l()}),[e.display,c]),Object(f.jsxs)("nav",{className:G.a.optionsBar,children:[Object(f.jsx)(L,{buttonText:"Game",handleClick:function(){e.display?r.game?(l(),e.hide()):o():(o(),e.show())},dropdown:r.game}),Object(f.jsx)(L,{buttonText:"Help",handleClick:function(){e.display?r.help?(l(),e.hide()):s():(s(),e.show())},dropdown:r.help})]})},X=function(){return Object(f.jsxs)("header",{children:[Object(f.jsx)(k,{}),Object(f.jsx)(I,{})]})},V=function(e,t){switch(t.type){case"RESET_BOARD":return console.log("BOARD REDUCER reset board"),Object(s.a)({},t.payload);case"CLEAR_BOARD":return console.log("BOARD REDUCER clear board"),Object(s.a)(Object(s.a)({},e),{},{board:[]});case"UNCOVER_BOARD":return console.log("BOARD REDUCER uncover board"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:q.smiling});case"SET_ANTS":return console.log("BOARD REDUCER set ants"),Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{face:q.smiling});case"UPDATE_BOARD":return console.log("BOARD REDUCER update board"),Object(s.a)(Object(s.a)({},e),t.payload);case"SET_FACE":return console.log("BOARD REDUCER set face"),Object(s.a)(Object(s.a)({},e),{},{face:t.payload});default:return Object(s.a)({},e)}},J=function(e){return{board:[],level:e.level,parameters:{rows:e.rows,cols:e.cols,ants:e.ants,antList:[]},flags:0,face:q.sleeping}},Q=n(19),Y=n.n(Q),H=function(e){return Object(f.jsx)("button",{className:Y.a.faceButton,onClick:e.onClick,children:String.fromCharCode(e.face[0],e.face[1])})},K=function(e,t){return e+"--"+t.toString()},Z=n(4),z=n.n(Z),$=function(e){var t=e.display.toString().padStart(3,"0").split("");return t&&"off"!==t||(t=["8","8","8"]),Object(f.jsx)("section",{className:z.a.calcScreen,id:e.id,children:t.map((function(t,n){return Object(f.jsxs)("div",{className:"".concat(z.a.digit," ").concat(z.a[K("digit",t)]),children:[Object(f.jsx)("div",{className:"".concat(z.a.digit__top," ").concat(z.a.digit__half)}),Object(f.jsx)("div",{className:"".concat(z.a.digit__bottom," ").concat(z.a.digit__half)})]},"".concat(e.id,"-digit-").concat(n))}))})},ee=n(20),te=n.n(ee),ne=function(e){var t=Object(a.useState)("off"),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(e.firstClick),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){return e.firstClick&&!l&&u(!0),!e.firstClick&&l&&u(!1),function(){}}),[e.firstClick,l]),Object(a.useEffect)((function(){var t;return l&&e.inProgress&&e.firstClick&&(t=setInterval((function(){r<999&&c((function(e){return e+1}))}),1e3)),e.inProgress||clearInterval(t),function(){clearInterval(t)}}),[r,l,e.firstClick,e.inProgress]),Object(f.jsxs)("section",{className:te.a.controls,children:[Object(f.jsx)($,{id:"flags",display:e.inProgress||l?e.flags:"off"}),Object(f.jsx)(H,{onClick:function(){c(0),e.startGame()},face:e.face}),Object(f.jsx)($,{id:"timer",display:e.inProgress||l?r:"off"})]})},ae={squareResponse:function(e,t){return{which:e,face:t}},touchStart:function(e){return e?ae.squareResponse("touchStart",q.winking):ae.squareResponse("touchStart",q.yelling)},touchEnd:function(e){return console.log("touch end count is "+e),e>0?ae.squareResponse("right",q.smiling):ae.squareResponse("left",q.smiling)},mouseDown:function(e,t){return 1===e?t.flagged?ae.squareResponse("left",q.winking):ae.squareResponse("left",q.yelling):t.flagged?ae.squareResponse("right",q.sweating):ae.squareResponse("right",q.smiling)}},re={routeClick:function(e,t,n){return"left"===t?re.leftClick(e,n):"right"===t?re.rightClick(e,n):void 0},leftClick:function(e,t){return e.flagged||e.revealed?{square:e,face:q.smiling}:e.ant?{square:Object(s.a)(Object(s.a)({},e),{},{display:S.ant,revealed:!0}),face:q.exploded,flags:t}:{square:Object(s.a)(Object(s.a)({},e),{},{display:0===e.nearbyAnts?"":e.nearbyAnts,revealed:!0}),face:q.smiling,flags:t}},rightClick:function(e,t){return e.flagged?{square:Object(s.a)(Object(s.a)({},e),{},{display:S.unclicked,revealed:!1,flagged:!1}),face:q.smiling,flags:t+1}:t>0?{square:Object(s.a)(Object(s.a)({},e),{},{display:S.flag,revealed:!1,flagged:!0}),face:q.smiling,flags:t-1}:{square:Object(s.a)({},e),face:q.smiling,flags:t}}},ce=n(8),oe=n.n(ce),se=!1,ie="left",le=!1,ue=0;var de=function(e){var t=Object(a.useRef)(),n=function(){se=!1,ie="left",le=!1,ue=0},r=function(t,a){if(e.gameOver)n();else if(!(le||e.sq.revealed||e.sq.flagged&&1===t.nativeEvent.which))if("down"===a){se=!0;var r=ae.mouseDown(t.nativeEvent.which,e);ie=r.which,e.changeFace(r.face)}else"up"===a&&(le||o(ie))},c=function(a){if(e.gameOver)n();else if(!(e.gameOver||se||e.sq.revealed))if("start"===a)le=!0,e.changeFace(ae.touchStart(e.sq.flagged).face),t.current=setInterval((function(){ue++}),800);else if("end"===a){clearInterval(t.current);var r=ae.touchEnd(ue);if(e.sq.flagged&&"left"===r.which)return void e.changeFace(r.face);o(r.which)}},o=function(t){ie="left",ue=0,e.onClick(e.sq.row,e.sq.col,t)};return Object(f.jsx)("button",{className:"\n        ".concat(oe.a.square,"\n        ").concat(e.sq.revealed&&oe.a["square--clicked"]," \n        ").concat(oe.a[K("nearbys",e.sq.nearbyAnts)],"\n        ").concat(e.sq.revealed&&e.sq.ant&&!e.sq.unclickedAnt?oe.a.firstAnt:null," \n      "),onMouseDown:function(e){return r(e,"down")},onMouseUp:le?void 0:function(e){return r(e,"up")},onTouchStart:function(){return c("start")},onTouchEnd:se?void 0:function(){return c("end")},onContextMenu:function(e){return e.preventDefault()},children:Array.isArray(e.sq.display)?String.fromCharCode(e.sq.display[0],e.sq.display[1]):e.sq.display})},fe=n(21),be=n.n(fe),_e=function(e){return e.boardGrid.map((function(t,n){return Object(f.jsx)("div",{className:be.a.board_row,children:t.map((function(t){return Object(f.jsx)(de,{id:t.key,sq:t,onClick:e.handleSquareClick,changeFace:e.setFace,gameOver:!e.gameInProgress},t.key)}))},"row-".concat(n))}))},pe=function(e,t){return Array.from(Array(e),(function(e,n){return Array.from(Array(t),(function(e,t){return function(e,t){return{key:"cell-"+e+"-"+t,row:e,col:t,ant:!1,revealed:!1,display:S.unclicked,flagged:!1,nearbyAnts:0,neighbors:[]}}(n,t)}))}))},je=function(e,t){return[t-1>=0?e[t-1]:null,e[t],t+1<e.length?e[t+1]:null]},Oe=function(e,t,n){var a=t-1>=0?je(e[t-1],n):[null,null,null],r=je(e[t],n),c=t+1<e.length?je(e[t+1],n):[null,null,null];return a.concat(r,c)},ge=function(e,t){for(var n=Array.from(Array(e),(function(e,t){return{id:t+1,ant:!1}})),a=0;a<t;a++)n[a].ant=!0;return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n)},he=function(e){var t=e.parameters.rows*e.parameters.cols,n=ge(t,e.parameters.ants),a=t-1,r=[];return e.board.forEach((function(e){e.forEach((function(e){e.ant=n[a].ant,a--,e.ant&&r.push(e.key)}))})),[e.board,r]},ye=function(e,t){var n=!1;return t.forEach((function(t){null!==t&&e.some((function(e){return e===t.key}))&&(n=!0)})),n},xe=function(e,t){var n,a=e.board,r=[];do{var c=he(e),o=Object(i.a)(c,2);a=o[0],r=o[1]}while(ye(r,t));return[(n=a,n.forEach((function(e,t){e.forEach((function(e,a){var r=0,c=Oe(n,t,a);c.forEach((function(e){e&&e.ant&&r++})),e.nearbyAnts=r,e.neighbors=c.filter((function(e){return null!==e}))}))})),n),r]},me=function e(t,n){return t.neighbors.forEach((function(t){n[t.row][t.col].revealed||(n[t.row][t.col]=Object(s.a)(Object(s.a)({},t),{},{revealed:!0,display:0===t.nearbyAnts?"":t.nearbyAnts}),0===t.nearbyAnts&&(n=e(t,n)))})),n},ve=n(15),we=n.n(ve),Ce=function(){var e=Object(a.useContext)(v),t=Object(a.useContext)(p),n=Object(a.useReducer)(V,J(e)),r=Object(i.a)(n,2),c=r[0],o=r[1],l=Object(a.useCallback)((function(){o({type:"RESET_BOARD",payload:J(e)}),t.set.reset()}),[e,t.set]),u=Object(a.useCallback)((function(e,n,a){if(!t.started){var r=Oe(c.board,e,n),l=xe(c,r),u=Object(i.a)(l,2),d=u[0],f=u[1];o({type:"SET_ANTS",payload:{board:d,parameters:Object(s.a)(Object(s.a)({},c.parameters),{},{antList:f})}}),t.set.start()}var b,_,p=Object(R.a)(c.board),j=c.board[e][n],O=re.routeClick(j,a,c.flags);p[e][n]=O.square,O.square.revealed&&(O.square.ant&&(t.set.lost(),b=p,_=c.parameters.antList,b.forEach((function(e,t){b.forEach((function(e,n){-1===_.indexOf(b[t][n].key)||b[t][n].revealed||b[t][n].flagged||(b[t][n]=Object(s.a)(Object(s.a)({},b[t][n]),{},{display:S.ant,revealed:!0,unclickedAnt:!0}))}))})),p=b),function(e,t){var n=t.rows*t.cols-t.ants;return e.forEach((function(t,a){e.forEach((function(t,r){!e[a][r].ant&&e[a][r].revealed&&n--}))})),0===n}(p,c.parameters)&&!O.square.ant&&(O.face=q.shades,t.set.won()),0===O.square.nearbyAnts&&(p=function(e,t){var n=t;return e.neighbors.forEach((function(e){t[e.row][e.col].revealed||(t[e.row][e.col]=Object(s.a)(Object(s.a)({},e),{},{revealed:!0,display:0===e.nearbyAnts?"":e.nearbyAnts}),0===e.nearbyAnts&&(t=me(e,t)))})),n}(O.square,p))),o({type:"UPDATE_BOARD",payload:{board:p,face:O.face,flags:O.flags}})}),[c,t]);return Object(a.useEffect)((function(){(e.level!==c.level||!t.ready&&!t.started&&c.board.length>0)&&l()}),[e.level,c.level,c.board,t,l]),Object(f.jsxs)("article",{className:we.a.gameWrapper,children:[Object(f.jsx)(ne,{startGame:function(){t.started&&l(),o({type:"CLEAR_BOARD"}),o({type:"UNCOVER_BOARD",payload:{board:pe(c.parameters.rows,c.parameters.cols),parameters:Object(s.a)({},c.parameters),flags:c.parameters.ants}}),t.set.ready()},inProgress:t.ready,face:c.face,flags:c.flags,firstClick:t.started}),Object(f.jsx)("section",{className:we.a.boardWrapper,children:c.board?Object(f.jsx)(_e,{boardGrid:c.board,handleSquareClick:u,setFace:function(e){o({type:"SET_FACE",payload:e})},gameInProgress:t.ready}):null})]})},Ee=n(22),De=n.n(Ee),Re=function(){return Object(f.jsxs)("main",{className:De.a.window,children:[Object(f.jsx)(D,{}),Object(f.jsx)(X,{}),Object(f.jsx)(Ce,{})]})},Se=n.p+"static/media/win98Logo.c4af9ed5.png",qe=n(12),Ae=n.n(qe),Be=function(){return Object(f.jsxs)("footer",{className:Ae.a.bg__footer,children:[Object(f.jsxs)("button",{id:"windows_start",className:Ae.a.startButton,children:[Object(f.jsx)("img",{src:Se,alt:"Windows 98 Logo"})," Start"]}),Object(f.jsxs)("button",{id:"antsweeper_min",className:"button--focus ".concat(Ae.a.gamewindowButton),children:[String.fromCharCode.apply(String,Object(R.a)(S.ant))," Antsweeper"]})]})};var ke=function(){var e=Object(a.useContext)(v);return Object(f.jsxs)("div",{className:e.level,children:[Object(f.jsx)(Re,{}),Object(f.jsx)(Be,{})]})};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(w,{children:Object(f.jsx)(ke,{})})}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.adc9ad6e.chunk.js.map